!function(e){function t(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e,t,a){e.exports=a(1)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function i(){var e=document.getElementById("ccm-toolbar");e&&window.addEventListener("keyup",function(t){if("INPUT"!==t.target.tagName)switch(t.preventDefault(),String(t.key||t.keyCode&&String.fromCharCode(t.keyCode)||t["char"]).toUpperCase()){case"M":"block"!==e.style.display&&e.style.display?e.style.display="block":e.style.display="none"}})}function o(){var e=document.getElementById("navbar");e&&React.render(React.createElement(R["default"],null),e),React.render(React.createElement(M["default"],{socialLogin:(JanesWalk.stacks||{"Social Logins":""})["Social Logins"]}),document.getElementById("modals"))}function l(){JanesWalk.event.on("area.receive",function(e){return m.receive(e)}),JanesWalk.event.on("user.receive",function(e,t){return d.receive(e,t)}),JanesWalk.event.on("users.receive",function(e){return d.receiveAll(e)}),JanesWalk.event.on("walk.receive",function(e){return h.receive(e)}),JanesWalk.event.on("walks.receive",function(e){return h.receiveAll(e)}),JanesWalk.event.on("city.receive",function(e){return v.receive(e)}),JanesWalk.event.on("itineraries.receive",function(e){return g.receiveAll(e)})}function c(){JanesWalk.event.on("walkpage.load",function(e){var t=e.walk,a=e.city;h.receive(t),React.render(React.createElement(P["default"],{city:a,page:JanesWalk.page,walk:t}),document.getElementById("page"))}),JanesWalk.event.on("profilepage.load",function(e){React.render(React.createElement(S["default"],e),document.getElementById("page"))}),JanesWalk.event.on("caw.load",function(e){React.render(React.createElement(T["default"],{data:JanesWalk.walk.data,city:JanesWalk.city,user:JanesWalk.user,url:JanesWalk.walk.url,valt:JanesWalk.form.valt}),document.getElementById("page"))})}var s=a(2),u=a(9),m=r(u),f=a(10),d=r(f),p=a(11),h=r(p),y=a(12),v=r(y),b=a(13),g=r(b),E=a(14),R=n(E),k=a(33),w=n(k),_=a(34),O=r(_),N=a(35),T=n(N),C=a(62),P=n(C),j=a(75),S=n(j),L=a(87),M=n(L);w["default"].addChangeListener(function(){switch(document.body.dataset.pageviewname){case"CityPageView":var e=w["default"].getCity();if(e){var t="url("+e.background+")";e.background&&document.body.style.backgroundImage!==t&&(document.body.style.backgroundImage=t)}}}),document.addEventListener("DOMContentLoaded",function(){(0,s.getTranslations)(JanesWalk.locale),o(),l(),c(),i(),O.startPolling(),JanesWalk.event.activate()})},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.translation){var t=window.sessionStorage.getItem("i18n_"+e.name);if(t)o["default"].receive(JSON.parse(t).translations[""]);else{var a=new XMLHttpRequest;a.open("get",e.translation,!0),a.onload=function(){var t=JSON.parse(this.responseText);window.sessionStorage.setItem("i18n_"+e.name,this.responseText),o["default"].receive(t.translations[""])},a.send()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.getTranslations=r;var i=a(3),o=n(i)},function(e,t,a){"use strict";function n(e){(0,r.dispatch)({type:i.ActionTypes.I18N_RECEIVE,translations:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.receive=n;var r=a(4),i=a(8)},function(e,t,a){"use strict";function n(e,t){return i.register(function(a){a.type in e&&(e[a.type](a),t&&t(a))})}Object.defineProperty(t,"__esModule",{value:!0}),t.waitFor=t.dispatch=t.register2=t.register=void 0;var r=a(5),i=new r.Dispatcher,o=i.dispatch.bind(i),l=i.register.bind(i),c=i.waitFor.bind(i);t["default"]=i,t.register=l,t.register2=n,t.dispatch=o,t.waitFor=c},function(e,t,a){"use strict";e.exports.Dispatcher=a(6)},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=a(7),i="ID_",o=function(){function e(){n(this,e),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}return e.prototype.register=function(e){var t=i+this._lastID++;return this._callbacks[t]=e,t},e.prototype.unregister=function(e){this._callbacks[e]?void 0:r(!1),delete this._callbacks[e]},e.prototype.waitFor=function(e){this._isDispatching?void 0:r(!1);for(var t=0;t<e.length;t++){var a=e[t];this._isPending[a]?this._isHandled[a]?void 0:r(!1):(this._callbacks[a]?void 0:r(!1),this._invokeCallback(a))}},e.prototype.dispatch=function(e){this._isDispatching?r(!1):void 0,this._startDispatching(e);try{for(var t in this._callbacks)this._isPending[t]||this._invokeCallback(t)}finally{this._stopDispatching()}},e.prototype.isDispatching=function(){return this._isDispatching},e.prototype._invokeCallback=function(e){this._isPending[e]=!0,this._callbacks[e](this._pendingPayload),this._isHandled[e]=!0},e.prototype._startDispatching=function(e){for(var t in this._callbacks)this._isPending[t]=!1,this._isHandled[t]=!1;this._pendingPayload=e,this._isDispatching=!0},e.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},e}();e.exports=o},function(e,t,a){"use strict";var n=function(e,t,a,n,r,i,o,l){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var s=[a,n,r,i,o,l],u=0;c=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return s[u++]}))}throw c.framesToPop=1,c}};e.exports=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=["I18N_RECEIVE","WALK_RECEIVE","WALK_RECEIVE_ALL","WALK_SAVE","WALK_PUBLISH","CITY_RECEIVE","AREA_RECEIVE","USER_RECEIVE","USER_RECEIVE_ALL","ITINERARY_RECEIVE","ITINERARY_REMOVE_WALK","ITINERARY_ADD_WALK","ITINERARY_SCHEDULE_WALK","ITINERARY_UNSCHEDULE_WALK","ITINERARY_UPDATE_TITLE","ITINERARY_UPDATE_DESCRIPTION","ITINERARY_CREATE_LIST","ITINERARY_RECEIVE_ALL","ITINERARY_SYNC_START","ITINERARY_SYNC_END"].reduce(function(e,t){return e[t]=t,e},{});t.ActionTypes=a},function(e,t,a){"use strict";function n(e){Object.keys(e).forEach(function(t){(0,r.dispatch)({type:i.ActionTypes.AREA_RECEIVE,name:t,content:e[t]})})}Object.defineProperty(t,"__esModule",{value:!0}),t.receive=n;var r=a(4),i=a(8)},function(e,t,a){"use strict";function n(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=t.current,n=t.profile;(0,i.dispatch)({type:o.ActionTypes.USER_RECEIVE,user:e,current:a,profile:n})}function r(e){(0,i.dispatch)({type:o.ActionTypes.USER_RECEIVE_ALL,users:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.receive=n,t.receiveAll=r;var i=a(4),o=a(8)},function(e,t,a){"use strict";function n(e){(0,i.dispatch)({type:o.ActionTypes.WALK_RECEIVE,walk:e})}function r(e){(0,i.dispatch)({type:o.ActionTypes.WALK_RECEIVE_ALL,walks:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.receive=n,t.receiveAll=r;var i=a(4),o=a(8)},function(e,t,a){"use strict";function n(e){(0,r.dispatch)({type:i.ActionTypes.CITY_RECEIVE,city:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.receive=n;var r=a(4),i=a(8)},function(e,t,a){"use strict";function n(e,t){(0,d.dispatch)({type:f.ActionTypes.ITINERARY_REMOVE_WALK,list:e,walk:t})}function r(e,t){(0,d.dispatch)({type:f.ActionTypes.ITINERARY_ADD_WALK,list:e,walk:t})}function i(e,t){(0,d.dispatch)({type:f.ActionTypes.ITINERARY_SCHEDULE_WALK,walk:e,time:t})}function o(e,t){(0,d.dispatch)({type:f.ActionTypes.ITINERARY_UNSCHEDULE_WALK,walk:e,time:t})}function l(e,t){(0,d.dispatch)({type:f.ActionTypes.ITINERARY_UPDATE_TITLE,title:t,list:e})}function c(e,t){(0,d.dispatch)({type:f.ActionTypes.ITINERARY_UPDATE_DESCRIPTION,description:t,list:e})}function s(e,t){(0,d.dispatch)({type:f.ActionTypes.ITINERARY_CREATE_LIST,title:e,description:t})}function u(e){(0,d.dispatch)({type:f.ActionTypes.ITINERARY_RECEIVE_ALL,itineraries:e})}function m(e){(0,d.dispatch)({type:f.ActionTypes.ITINERARY_SYNC_END,start:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.remove=n,t.add=r,t.schedule=i,t.unschedule=o,t.updateTitle=l,t.updateDescription=c,t.createList=s,t.receiveAll=u,t.syncEnd=m;var f=a(8),d=a(4)},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){return{options:p["default"].getArea("Left Header"),dropdown:p["default"].getArea("Dropdown"),user:y["default"].getCurrent(),itinerary:b["default"].getLists(),totalWalks:b["default"].totalWalks()}}function c(e,t){var a=document.createElement("div");a.innerHTML=e,[].forEach.call(a.children,function(e){return t.parentNode.appendChild(e)})}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=a(15),f=n(m),d=a(28),p=n(d),h=a(29),y=n(h),v=a(16),b=n(v),g=a(30),E=a(31),R=n(E),k=a(32),w=n(k),_=function(e){function t(){var e;r(this,t);for(var a=arguments.length,n=Array(a),o=0;a>o;o++)n[o]=arguments[o];var c=i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return Object.assign(c,{state:s({lastSize:b["default"].totalWalks()},l()),_onChange:function(){return c.setState(l)}}),c}return o(t,e),u(t,[{key:"componentWillMount",value:function(){p["default"].addChangeListener(this._onChange),y["default"].addChangeListener(this._onChange)}},{key:"componentDidMount",value:function(){c(this.state.options,this.refs.topnav),(0,g.makeSticky)(React.findDOMNode(this),this.refs.header)}},{key:"componentWillUpdate",value:function(e,t){var a=t.options,n=t.searching;a&&a!==this.state.options&&c(a,this.refs.topnav),!this.state.searching&&n&&this.openSearch()}},{key:"componentWillUnmount",value:function(){p["default"].removeChangeListener(this._onChage),y["default"].removeChangeListener(this._onChage)}},{key:"openSearch",value:function(){$("html, body").animate({scrollTop:0},300)}},{key:"render",value:function(){var e=this,t=this.props.editMode,a=this.state,n=a.user,r=a.searching,i=a.profiling,o=a.totalWalks,l=void 0,c={searching:r,toggleSearch:function(){return e.setState({searching:!e.state.searching})}};return l=n?(0,R["default"])(s({},c,{unseenUpdates:this.state.lastSize!==o,toggleProfile:function(){return e.setState({profiling:!e.state.profiling,lastSize:o})},user:n,profiling:i})):(0,w["default"])(c),React.createElement("div",null,React.createElement("header",{ref:"header",className:[t?"edit":"",r?"dropped":""].join(" ")},React.createElement("nav",{role:"navigation"},React.createElement("a",{href:"/",className:"logo"},React.createElement("span",null)),React.createElement("ul",{className:"nav",ref:"topnav"},l,React.createElement("li",null,React.createElement("a",{href:"/donate",id:"donate"},"Donate")))),React.createElement("div",{className:"navbar-outer",dangerouslySetInnerHTML:{__html:this.state.dropdown}})),React.createElement("div",{id:"modals"},i?React.createElement(f["default"],{onClose:function(){return e.setState({profiling:!e.state.profiling})}}):null))}}]),t}(React.Component);t["default"]=_,_.defaultProps={editMode:CCM_EDIT_MODE}},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),m=a(16),f=r(m),d=a(19),p=r(d),h=a(13),y=n(h),v=a(20),b=a(22),g=r(b),E=a(26),R=r(E),k=a(27),w=r(k),_=function(){var e=arguments.length<=0||void 0===arguments[0]?[].concat(c(f["default"].getLists()))[0]:arguments[0];return{activeList:e,lists:f["default"].getLists(),schedule:f["default"].getSchedule()}},O=function(e){function t(e){var a;i(this,t);for(var n=arguments.length,r=Array(n>1?n-1:0),l=1;n>l;l++)r[l-1]=arguments[l];var c=o(this,(a=Object.getPrototypeOf(t)).call.apply(a,[this,e].concat(r)));return Object.assign(c,{state:Object.assign({},_(),e.itinerary),_onChange:function(){return c.setState(function(){return _(c.state.activeList)})},handleHide:function(){return c.state.$el.modal("hide")},handleChooseItinerary:function(e){return c.setState({activeList:e})},handleChangeTitle:function(e){return y.updateTitle(c.state.activeList,e)},handleChangeDescription:function(e){return y.updateDescription(c.state.activeList,e)}}),c}return l(t,e),u(t,[{key:"componentWillMount",value:function(){f["default"].addChangeListener(this._onChange),p["default"].addChangeListener(this._onChange)}},{key:"componentDidMount",value:function(){var e=this,t=$(React.findDOMNode(this));t.modal(),t.on("hidden.bs.modal",function(){return e.props.onClose()}),this.setState({$el:t})}},{key:"componentWillUnmount",value:function(){f["default"].removeChangeListener(this._onChange),p["default"].removeChangeListener(this._onChange)}},{key:"handleCreateItinerary",value:function(){y.createList((0,v.t)("New Itinerary"))}},{key:"render",value:function(){var e=this.state,t=e.activeList,a=e.lists,n=e.schedule,r=[];return t.walks.forEach(function(e,i){var o=function(e){return y.add(e,i)},l=function(e){return y.remove(e,i)},c=function(e){return y.schedule(i,e)},u=function(e){return y.unschedule(i,e)};r.push(React.createElement(g["default"],s({key:i.id,list:t},{lists:a,walk:i,schedule:n,onAdd:o,onRemove:l,onSchedule:c,onUnschedule:u})))}),React.createElement("dialog",{open:!0},React.createElement("section",{id:"itinerary"},React.createElement("i",{className:"close fa fa-times",onClick:this.handleHide}),React.createElement(w["default"],s({onChoose:this.handleChooseItinerary,onCreate:this.handleCreateItinerary},{lists:a,activeList:t})),React.createElement("div",{className:"itinerary"},React.createElement("section",null,React.createElement(R["default"],{onChangeDescription:this.handleChangeDescription,onChangeTitle:this.handleChangeTitle,list:t})),React.createElement("ul",null,r)),React.createElement("p",{className:"knightFdn-itinerary"},"Powered by the Knight Foundation")))}}]),t}(React.Component);t["default"]=O},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){var t=!0,a=!1,n=void 0;try{for(var r,i=p[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;if(o.walks.has(e))return!0}}catch(l){a=!0,n=l}finally{try{!t&&i["return"]&&i["return"]()}finally{if(a)throw n}}return!1}Object.defineProperty(t,"__esModule",{value:!0});var o,l=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=a(4),s=a(8),u=a(17),m=n(u),f=a(19),d=n(f),p=new Set,h=new Map,y=Date.now(),v=function(e,t){var a=h.get(e)||new Set;a.add(+t),h.set(e,a)},b=function(e,t){var a=h.get(e)||new Set;a["delete"](+t),h.set(e,a)},g=function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],a={title:e,description:t,walks:new Set,shareUrl:""};return p.add(a),a},E=function(e){var t=e.lists,a=e.schedule;t.forEach(function(e){p.add(Object.assign({},e,{walks:new Set(e.walks.map(function(e){return d["default"].getWalk(+e)}))}))}),Object.keys(a).forEach(function(e){h.set(d["default"].getWalk(+e),new Set(a[e].map(function(e){return+e})))})},R=Object.assign({},m["default"],{getLists:function(){return p},getSchedule:function(){return h},getWalks:function(e){return e.walks},getLastChange:function(){return y},hasInList:i,hasInSchedule:function(e,t){var a=h.get(e);return!(!a||!a.has(+t))},totalWalks:function(){var e=0;return p.forEach(function(t){e+=t.walks.size}),e},dispatcherIndex:(0,c.register2)((o={},r(o,s.ActionTypes.ITINERARY_ADD_WALK,function(e){var t=e.list,a=e.walk;return t.walks.add(a)}),r(o,s.ActionTypes.ITINERARY_REMOVE_WALK,function(e){var t=e.list,a=e.walk;return t.walks["delete"](a)}),r(o,s.ActionTypes.ITINERARY_UNSCHEDULE_WALK,function(e){var t=e.walk,a=e.time;return b(t,a)}),r(o,s.ActionTypes.ITINERARY_UPDATE_TITLE,function(e){var t=e.list,a=e.title;t.title=a}),r(o,s.ActionTypes.ITINERARY_UPDATE_DESCRIPTION,function(e){var t=e.list,a=e.description;t.description=a}),r(o,s.ActionTypes.ITINERARY_CREATE_LIST,function(e){var t=e.title,a=e.description;return g(t,a)}),r(o,s.ActionTypes.ITINERARY_SCHEDULE_WALK,function(e){var t=e.list;t=void 0===t?p:t;var a=l(t,1),n=a[0],r=e.walk,o=e.time;i(r)||n.walks.add(r),v(r,o)}),r(o,s.ActionTypes.ITINERARY_RECEIVE_ALL,function(e){var t=e.itineraries;(0,c.waitFor)([d["default"].dispatchToken]),E(t)}),o),function(){y=Date.now(),R.emitChange()})});t["default"]=R},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(18),i=n(r),o="change",l=Object.assign({},i["default"].prototype,{emitChange:function(){this.emit(o)},addChangeListener:function(e){this.on(o,e)},removeChangeListener:function(e){this.removeListener(o,e)}});t["default"]=l},function(e,t){"use strict";function a(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function r(e){return"number"==typeof e}function i(e){return"object"===("undefined"==typeof e?"undefined":l(e))&&null!==e}function o(e){return void 0===e}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0,a.defaultMaxListeners=10,a.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},a.prototype.emit=function(e){var t,a,r,l,c,s;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(a=this._events[e],o(a))return!1;if(n(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:l=Array.prototype.slice.call(arguments,1),a.apply(this,l)}else if(i(a))for(l=Array.prototype.slice.call(arguments,1),s=a.slice(),r=s.length,c=0;r>c;c++)s[c].apply(this,l);return!0},a.prototype.addListener=function(e,t){var r;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?i(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,i(this._events[e])&&!this._events[e].warned&&(r=o(this._maxListeners)?a.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[e].length>r&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},a.prototype.on=a.prototype.addListener,a.prototype.once=function(e,t){function a(){this.removeListener(e,a),r||(r=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var r=!1;return a.listener=t,this.on(e,a),this},a.prototype.removeListener=function(e,t){var a,r,o,l;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(a=this._events[e],o=a.length,r=-1,a===t||n(a.listener)&&a.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(a)){for(l=o;l-- >0;)if(a[l]===t||a[l].listener&&a[l].listener===t){r=l;break}if(0>r)return this;1===a.length?(a.length=0,delete this._events[e]):a.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},a.prototype.removeAllListeners=function(e){var t,a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(a=this._events[e],n(a))this.removeListener(e,a);else if(a)for(;a.length;)this.removeListener(e,a[a.length-1]);return delete this._events[e],this},a.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},a.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},a.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){f.set(+e.id,e)}function o(e){var t=!0,a=!1,n=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var l=r.value;i(l)}}catch(c){a=!0,n=c}finally{try{!t&&o["return"]&&o["return"]()}finally{if(a)throw n}}}Object.defineProperty(t,"__esModule",{value:!0});var l,c=a(4),s=a(8),u=a(17),m=n(u),f=new Map,d=Object.assign({},m["default"],{getWalks:function(){return f},getWalk:function(e){return f.get(+e)},dispatchToken:(0,c.register2)((l={},r(l,s.ActionTypes.WALK_RECEIVE,function(e){var t=e.walk;return i(t)}),r(l,s.ActionTypes.WALK_RECEIVE_ALL,function(e){var t=e.walks;return o(t)}),l),function(){return d.emitChange()})});t["default"]=d},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0}),t.tc=t.t2=t.t=void 0;var i=a(17),o=n(i),l=a(4),c=a(8),s=a(21),u=n(s),m=new u["default"],f=Object.assign({},o["default"],{getTranslate:function(){return m.translate.bind(m)},getTranslatePlural:function(){return m.translatePlural.bind(m)},dispatchToken:(0,l.register2)(r({},c.ActionTypes.I18N_RECEIVE,function(e){var t=e.translations;return m.constructor(t)}),function(){return f.emitChange()})});t["default"]=f;t.t=f.getTranslate(),t.t2=f.getTranslatePlural(),t.tc=function(e,t){return t}},function(e,t){"use strict";function a(e){var t=Array.prototype.slice.call(arguments);return t.shift().replace(/%(s|d)/g,function(){return t.shift()})}function n(e){e&&(this.translations=e)}Object.defineProperties(n.prototype,{translations:{value:{},writable:!0,enumerable:!0},translate:{value:function(e){var t=Array.prototype.slice.call(arguments);return t[0]=(this.translations[e]||[e])[0],a.apply(this,t)}},translatePlural:{value:function(e,t,n){var r=1!==n?1:0,i=(this.translations[e+"_"+t]||[e,t])[r];return a(i,n)}},translateContext:{value:function(e,t){var n=Array.prototype.slice.call(arguments,2);a.apply(this,[e,n])}}}),e.exports=n},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(23),s=n(c),u=a(24),m=n(u),f=function(e){function t(){var e;r(this,t);for(var a=arguments.length,n=Array(a),o=0;a>o;o++)n[o]=arguments[o];var l=i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return l.state={dialogOpen:!1},l}return o(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.list;t!==this.props.list&&this.setState({dialogOpen:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.walk,n=t.list,r=t.lists,i=t.onAdd,o=t.onRemove,l=t.onSchedule,c=t.onUnschedule,u=t.schedule,f=t.isScheduled,d=this.state.dialogOpen,p=a.title,h=a.url,y=a.map,v=a.time,b=void 0;return y&&y.markers[0]&&(b=y.markers[0].title),React.createElement("li",{className:"walklistItem"},React.createElement("div",{className:"walk"},React.createElement("h3",null,React.createElement("a",{href:h},p)),React.createElement("h4",null,b),React.createElement(m["default"],{schedule:u,time:v,walk:a,onSchedule:l,onUnschedule:c,isScheduled:f})),React.createElement("button",{className:"action removeWalk",onClick:function(){return o(n)}}),React.createElement("button",{className:"action addWalk "+(d?"selected":""),onClick:function(){return e.setState({dialogOpen:!d})}}),d?React.createElement(s["default"],{lists:r,walk:a,list:n,onAdd:i,onRemove:o}):null)}}]),t}(React.Component);f.propTypes={title:React.PropTypes.string,time:React.PropTypes.number,meeting:React.PropTypes.string,id:React.PropTypes.number.isRequired,remove:React.PropTypes.func.isRequired},f.defaultProps={title:"Walk Title",time:{slots:[Date.now(),Date.now()]},remove:null},t["default"]=f},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(a(20),function(e){var t=e.lists,a=e.walk,n=e.list,r=e.onAdd,i=e.onRemove,o=[],l=!0,c=!1,s=void 0;try{for(var u,m=function(){var e=u.value;if(n!==e){var t=e.id,l=e.title,c=e.walks,s=c.has(a),m=void 0;m=s?function(){return i(e)}:function(){return r(e)},o.push(React.createElement("li",{key:t},React.createElement("a",{onClick:m,className:s?"selected":""},l)))}},f=t[Symbol.iterator]();!(l=(u=f.next()).done);l=!0)m()}catch(d){c=!0,s=d}finally{try{!l&&f["return"]&&f["return"]()}finally{if(c)throw s}}return React.createElement("div",{id:"addWalk",className:"add-walk-to-list"},React.createElement("ul",null,o))});n.propTypes={lists:React.PropTypes.instanceOf(Set)},t["default"]=n},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(25),r=function(e){var t=e.schedule,a=e.time,r=e.walk,i=e.onSchedule,o=e.onUnschedule,l=[],c=t.get(r)||new Set;return a&&a.slots&&(l=a.slots.map(function(e){return c.has(+e[0])?React.createElement("h4",null,(0,n.dateFormatted)(e[0]),React.createElement("button",{className:"removeItinerary",onClick:function(){return o(+e[0])}})):React.createElement("h4",null,(0,n.dateFormatted)(e[0]),React.createElement("button",{className:"addItinerary",onClick:function(){return i(+e[0])}}))})),React.createElement("section",null,l)};t["default"]=r},function(e,t){"use strict";function a(e){if(i)return i.format(e);var t=new Date(e),a=t.toUTCString();return a.slice(0,a.indexOf(" GMT"))}function n(e){var t=o[e],n=void 0;return e?t?t:(n=a(1e3*e),o[e]=n,n):e}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.dateFormatted=n;var i=void 0;"object"===("undefined"==typeof Intl?"undefined":r(Intl))&&(i=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZone:"UTC"}));var o={}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20),r=function(e){var t=e.list,a=e.onChangeTitle,r=e.onChangeDescription;return React.createElement("header",{className:"itineraryHeader"},React.createElement("h2",null,React.createElement("input",{type:"text",required:"required",value:t.title,placeholder:(0,n.t)("My Itinerary's Title"),onChange:function(e){return a(e.target.value)}})),(t.shareUrl,null),React.createElement("h4",{className:"walklistDescription"},React.createElement("textarea",{required:"required",value:t.description,placeholder:(0,n.t)("Tell people about it! Start typing here to give your list some commentary."),onChange:function(e){return r(e.target.value)}})))};r.propTypes={title:React.PropTypes.string,description:React.PropTypes.string},t["default"]=r},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(a(13),a(20)),r=function(e){var t=e.lists,a=e.activeList,r=e.onChoose,i=e.onCreate,o=[];return t.forEach(function(e){return o.push(React.createElement("li",{key:e.id},React.createElement("a",{className:a===e?"selected":"",onClick:function(){return r(e)}},e.title," (",e.walks.size,")")))}),React.createElement("dialog",{id:"itinerary-select",className:"static-list"},React.createElement("ul",null,o),React.createElement("button",{onClick:i},React.createElement("i",{className:"fa fa-plus"})," ",(0,n.t)("New List")))};t["default"]=r},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),o=a(8),l=a(17),c=n(l),s={},u=Object.assign({},c["default"],{getAreas:function(){return s},getArea:function(e){return s[e]},dispatcherIndex:(0,i.register2)(r({},o.ActionTypes.AREA_RECEIVE,function(e){var t=e.name,a=e.content;s[t]=a}),function(){return u.emitChange()})});t["default"]=u},function(e,t,a){"use strict";function n(e){
return e&&e.__esModule?e:{"default":e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e){var t=e.user,a=e.current;m.set(+t.id,t),a&&(f=t)}Object.defineProperty(t,"__esModule",{value:!0});var o,l=a(4),c=a(8),s=a(17),u=n(s),m=new Map,f=void 0,d=Object.assign({},u["default"],{getUsers:function(){return m},getCurrent:function(){return f},dispatchToken:(0,l.register2)((o={},r(o,c.ActionTypes.USER_RECEIVE,i),r(o,c.ActionTypes.USER_RECEIVE_ALL,function(e){var t=e.users;return t.forEach(function(e){return i({user:e})})}),o),function(){return d.emitChange()})});t["default"]=d},function(e,t){"use strict";function a(e,t){var a=!1,n=e.offsetTop,r=function(){a||(a=!0,requestAnimationFrame(function(){a=!1,window.scrollY>n-60?t.classList.add("fixed"):t.classList.remove("fixed")}))};window.addEventListener("scroll",r),window.addEventListener("resize",function(){n=e.offsetTop,r()})}Object.defineProperty(t,"__esModule",{value:!0}),t.makeSticky=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20);t["default"]=function(e){var t=e.user,a=e.profiling,r=e.searching,i=e.toggleProfile,o=e.toggleSearch,l=e.unseenUpdates;return[React.createElement("li",null,React.createElement("a",{onClick:o,className:r?"selected":""},React.createElement("i",{className:"fa fa-search"}))),React.createElement("li",{className:l?"notify":""},React.createElement("a",{onClick:i,className:a?"selected":""},React.createElement("i",{className:"fa fa-calendar"}))),React.createElement("li",null,React.createElement("a",{href:"/profile"},t.firstName||t.name)),React.createElement("li",null,React.createElement("a",{href:"/login/logout"},(0,n.t)("Logout")))]}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20);t["default"]=function(e){var t=e.searching,a=e.toggleSearch;return[React.createElement("li",null,React.createElement("a",{onClick:a,className:t?"selected":""},React.createElement("i",{className:"fa fa-search"}))),React.createElement("li",null,React.createElement("a",{href:"/register"},(0,n.tc)("Register on a website","Join"))),React.createElement("li",null,React.createElement("a",{onClick:function(){return $("#login").modal()}},(0,n.t)("Log in")))]}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Object.defineProperty(t,"__esModule",{value:!0});var i=a(4),o=a(8),l=a(17),c=n(l),s=void 0,u=Object.assign({},c["default"],{getCity:function(){return s},getLocation:function(){return s&&s.latlng},dispatchToken:(0,i.register2)(r({},o.ActionTypes.CITY_RECEIVE,function(e){var t=e.city;s=t}),function(){return u.emitChange()})});t["default"]=u},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function i(e){return Array.isArray(e)?e:Array.from(e)}function o(e,t){var a=i(e),n=a,o=i(t),l=o;return JSON.stringify({lists:n.map(function(e){var t=[];return e.walks.forEach(function(e){return t.push(+e.id)}),Object.assign({},e,{walks:t})}),schedule:l.reduce(function(e,t){var a=u(t,2),n=a[0],i=a[1];return e[+n.id]=[].concat(r(i)),e},{})})}function l(e){var t=arguments.length<=1||void 0===arguments[1]?p:arguments[1],a=new XMLHttpRequest;a.open("POST",t),a.onload=function(){var a=void 0;try{a=JSON.parse(this.responseText),console.log(a),e()}catch(n){console.log("Error parsing JSON returned on itinerary"+t)}},a.onerror=function(){console.log("Failed to update itinerary.")},a.send(o(f["default"].getLists(),f["default"].getSchedule()))}function c(){var e=arguments.length<=0||void 0===arguments[0]?p:arguments[0],t=new XMLHttpRequest;t.open("GET",e),t.onload=function(){var t=void 0;try{t=JSON.parse(this.responseText),(0,d.receiveAll)(t)}catch(a){cb("Error parsing JSON returned on itinerary"+e)}},t.onerror=function(){console.log("Failed to update itinerary.")},t.send()}function s(){var e=arguments.length<=0||void 0===arguments[0]?100:arguments[0],t=f["default"].getLastChange(),a=!1;setInterval(function(){var n=f["default"].getLastChange();Date.now()-n>3*e&&n>t&&!a&&(a=!0,l(function(){t=Date.now(),a=!1}))},e)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.post=l,t.get=c,t.startPolling=s;var m=a(16),f=n(m),d=a(13),p="/profile/itineraries"},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(36),s=n(c),u=a(37),m=n(u),f=a(39),d=n(f),p=a(46),h=n(p),y=a(52),v=n(y),b=a(53),g=n(b),E=a(54),R=n(E),k=a(55),w=n(k),_=a(56),O=n(_),N=a(57),T=n(N),C=a(58),P=n(C),j=a(59),S=a(20),L=n(S),M=a(61),W=n(M),A=function(e){function t(e){r(this,t);var a=i(this,Object.getPrototypeOf(t).call(this,e)),n=e.data,o=e.user,l=e.url;return Object.assign(a,{state:Object.assign({},{notifications:[]},(0,j.buildWalkObject)({data:n,user:o,url:l})),_onChange:function(){return a.setState({})},saveWalk:function(e,t){var n=a.state.notifications,r=function(){a.setState({notifications:a.state.notifications.slice(1)})},i={messageTimeout:1200};e=Object.assign({},i,e),n.push({type:"info",name:"Saving walk"}),a.setState({map:a.refs.mapBuilder.getStateSimple(),notifications:n},function(){$.ajax({url:a.state.url,type:e.publish?"PUT":"POST",data:{json:JSON.stringify(a.state)},dataType:"json",success:function(e){n.push({type:"success",name:"Walk saved"}),a.setState({notifications:n,url:e.url||a.state.url},function(){t&&t instanceof Function&&t.call(this)}),setTimeout(r,1200)},error:function(e,t,i){n.push({type:"danger",name:"Walk failed to save",message:"Keep this window open and contact Jane's Walk for assistance"}),a.setState({notifications:n}),setTimeout(r,6e3),console.error(a.url,t,i.toString())}})}),setTimeout(r,1200)},handleNext:function(){var e=$("#progress-panel > .nav > li.active + li > a");window.scrollTo(0,0),e.length?(a.saveWalk(),e.trigger("click")):a.refs.publish.trigger("click")},handlePublish:function(){return a.saveWalk({publish:!0},function(){return console.log("Walk published")})},handlePreview:function(){return a.saveWalk({},function(){return a.setState({preview:!0})})}}),a}return o(t,e),l(t,[{key:"componentWillMount",value:function(){L["default"].addChangeListener(this._onChange),W["default"].addChangeListener(this._onChange)}},{key:"componentWillUnmount",value:function(){L["default"].removeChangeListener(this._onChange),W["default"].removeChangeListener(this._onChange)}},{key:"render",value:function(){var e=this,t={value:this.state.map,requestChange:function(t,a){e.setState({map:t},a)}},a=this.props,n=a.user,r=a.valt,i=a.city,o=this.state.team;return React.createElement("main",{id:"create-walk"},React.createElement("section",null,React.createElement("nav",{id:"progress-panel"},React.createElement(P["default"],null),React.createElement("section",{id:"button-group"},React.createElement("button",{className:"btn btn-info btn-preview",id:"preview-walk",title:"Preview what you have so far.",onClick:this.handlePreview},(0,S.t)("Preview Walk")),React.createElement("button",{className:"btn btn-info btn-submit",id:"btn-submit",title:"Publishing will make your visible to all.",onClick:function(){return e.setState({publish:!0})},ref:"publish"},(0,S.t)("Publish Walk")),React.createElement("button",{className:"btn btn-info save",title:"Save",id:"btn-save",onClick:this.saveWalk},(0,S.t)("Save")))),React.createElement("div",{id:"main-panel",role:"main"},React.createElement("div",{className:"tab-content"},React.createElement("div",{className:"tab-pane active",id:"description"},React.createElement("div",{className:"walk-submit lead clearfix"},React.createElement("div",{className:"col-md-4"},React.createElement("img",{id:"convo-marker",src:CCM_THEME_PATH+"/img/jw-intro-graphic.svg",alt:"Jane's Walks are walking conversations."})),React.createElement("div",{className:"col-md-8"},React.createElement("h1",null,(0,S.t)("Hey there, %s!",n.firstName)),React.createElement("p",null,(0,S.t)("Jane’s Walks are walking conversations about neighbourhoods. You can return to this form at any time, so there's no need to finish everything at once.")))),React.createElement("div",{className:"page-header","data-section":"description"},React.createElement("h1",null,(0,S.t)("Describe Your Walk"))),React.createElement("form",null,React.createElement("fieldset",null,React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"title"},(0,S.t)("Walk Title")),React.createElement("div",{className:"alert alert-info"},(0,S.t)("Something short and memorable.")),React.createElement("input",{type:"text",valueLink:this.linkState("title")})))),React.createElement(s["default"],{valueLink:this.linkState("thumbnails"),valt:r}),React.createElement("form",null,React.createElement("hr",null),React.createElement("fieldset",null,React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"shortdescription"},(0,S.t)("Your Walk in a Nutshell")),React.createElement("div",{className:"alert alert-info"},(0,S.t)("Build intrigue! This is what people see when browsing our walk listings.")),React.createElement(O["default"],{id:"shortdescription",name:"shortdescription",rows:"6",maxLength:"140",valueLink:this.linkState("shortDescription"),required:!0})),React.createElement("hr",null),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"longdescription",id:"longwalkdescription"},(0,S.t)("Walk Description")),React.createElement("div",{className:"alert alert-info"},(0,S.t)("Help jump start the conversation on your walk by giving readers an idea of the discussions you'll be having on the walk together. We suggest including a couple of questions to get people thinking about how they can contribute to the dialog on the walk. To keep this engaging, we recommend keeping your description to 200 words.")),React.createElement("textarea",{id:"longdescription",name:"longdescription",rows:"14",valueLink:this.linkState("longDescription")}))),React.createElement(m["default"],{valueLink:this.linkState("checkboxes")}),(i.wards||[]).length>0?React.createElement(v["default"],{wards:i.wards,valueLink:this.linkState("wards")}):null,React.createElement("hr",null))),React.createElement(d["default"],{ref:"mapBuilder",valueLink:t,city:i}),React.createElement(h["default"],{valueLink:this.linkState("time")}),React.createElement("div",{className:"tab-pane",id:"accessibility"},React.createElement("div",{className:"page-header","data-section":"accessibility"},React.createElement("h1",null,(0,S.t)("Make it Accessible"))),React.createElement("div",{className:"item"},React.createElement(g["default"],{valueLink:this.linkState("checkboxes")})),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",null,(0,S.t)("What else do people need to know about the accessibility of this walk?")," (",(0,S.t)("Optional"),")"),React.createElement(O["default"],{name:"accessible-info",rows:"3",maxLength:"500",valueLink:this.linkState("accessibleInfo")}))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",{id:"transit"},(0,S.t)("How can someone get to the meeting spot by public transit?")," (",(0,S.t)("Optional"),")"),React.createElement("div",{className:"alert alert-info"},(0,S.t)("Nearest subway stop, closest bus or streetcar lines, etc.")),React.createElement("textarea",{rows:"3",name:"accessible-transit",valueLink:this.linkState("accessibleTransit")}))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",null,(0,S.t)("Where are the nearest places to park?")," (",(0,S.t)("Optional"),")"),React.createElement("textarea",{rows:"3",name:"accessible-parking",valueLink:this.linkState("accessibleParking")}))),React.createElement("div",{className:"item"},React.createElement("fieldset",null,React.createElement("legend",{className:"required-legend"},(0,S.t)("How will people find you?")),React.createElement("div",{className:"alert alert-info"},(0,S.t)("Perhaps you will be holding a sign, wearing a special t-shirt or holding up an object that relates to the theme of your walk. Whatever it is, let people know how to identify you.")),React.createElement("textarea",{rows:"3",name:"accessible-find",valueLink:this.linkState("accessibleFind")}))),React.createElement("hr",null),React.createElement("br",null)),React.createElement(R["default"],{onChange:function(t){return e.setState({team:t})},team:o})),React.createElement("button",{type:"button",onClick:this.handleNext,className:"btn"},"Next")),React.createElement("aside",{id:"tips-panel",role:"complementary"},React.createElement("div",{className:"popover right",id:"city-organizer",style:{display:"block"}},React.createElement("h3",{className:"popover-title","data-toggle":"collapse","data-target":"#popover-content"},React.createElement("i",{className:"fa fa-envelope"}),(0,S.t)("Contact City Organizer for help")),React.createElement("div",{className:"popover-content collapse in",id:"popover-content"},i.cityOrganizer.photo?React.createElement("div",{className:"u-avatar",style:{backgroundImage:"url("+i.cityOrganizer.photo+")"}}):null,React.createElement("p",null,(0,S.t)("Hi! I'm %s, the City Organizer for Jane's Walk %s. I'm here to help, so if you have any questions, please",i.cityOrganizer.firstName,i.name)," ",React.createElement("strong",null,React.createElement("a",{href:"mailto:"+i.cityOrganizer.email},(0,S.t)("email me"),"!"))))))),this.state.publish?React.createElement(w["default"],{url:this.state.url,saveWalk:this.saveWalk,close:function(){return e.setState({publish:!1})},city:i,mirrors:this.state.mirrors}):null,this.state.preview?React.createElement(T["default"],{url:this.state.url,close:function(){return e.setState({preview:!1})}}):null,React.createElement("aside",{id:"notifications"},this.state.notifications.map(function(e){return React.createElement("div",{key:e.message,className:"alert alert-"+e.type},React.createElement("strong",null,e.name||"",": "),e.message||"")})))}}]),t}(React.Component);t["default"]=A,Object.assign(A.prototype,React.addons.LinkedStateMixin)},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(20),c=function(e){function t(e){n(this,t);var a=r(this,Object.getPrototypeOf(t).call(this,e));return Object.assign(a,{removeImage:function(e){var t=a.props.valueLink.value;t.splice(e,1),a.props.valueLink.requestChange(t)},handleUpload:function(e){var t=new FormData,n=new XMLHttpRequest;e.currentTarget.files&&(t.append("Filedata",e.currentTarget.files[0]),t.append("ccm_token",a.props.valt),n.open("POST",CCM_TOOLS_PATH+"/files/importers/quick"),n.onload=function(){try{var e=a.props.valueLink.value,t=JSON.parse(n.responseText);e.push(t),a.props.valueLink.requestChange(e)}catch(r){console.log("Error uploading image.")}},n.send(t))}}),a}return i(t,e),o(t,[{key:"render",value:function(){var e=this,t=this.props.valueLink.value;return React.createElement("form",{className:"upload-image"},React.createElement("label",{htmlFor:"walkphotos",id:"photo-tip"},(0,l.t)("Upload a photo that best represents your walk.")),t.map(function(t,a){var n=((t.url||"")+"i").replace(/^.*[\\\/]/,""),r=function(){return e.removeImage(a)};return React.createElement("div",{key:n,className:"thumbnail",style:{backgroundImage:"url("+t.url+")"}},React.createElement("a",{className:"remove",onClick:r},React.createElement("i",{className:"fa fa-times-circle"})))}),t.length<1?React.createElement("div",{className:"thumbnail fileupload"},React.createElement("input",{className:"ccm-al-upload-single-file",type:"file",onChange:this.handleUpload}),React.createElement("i",{className:"fa fa-camera-retro fa-5x"}),React.createElement("span",{className:"fileupload-new"},(0,l.t)("Click to upload an image"))):void 0)}}]),t}(React.Component);t["default"]=c},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(20),c=a(38),s=function(e){function t(){n(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return e.state={maxChecked:3,totalChecked:0},e}return i(t,e),o(t,[{key:"render",value:function(){var e=this,t=this,a=this.props.valueLink.value,n=0;for(var r in a)a[r]&&"theme-"===r.substring(0,6)&&n++;return React.createElement("fieldset",{id:"theme-select"},React.createElement("legend",{className:"required-legend"},(0,l.t)("Themes")),React.createElement("div",{className:"alert alert-info"},(0,l.t)("Pick between %d and %d boxes.",1,this.state.maxChecked)),this.props.themeCategories.map(function(r){return React.createElement("fieldset",{key:r.name},React.createElement("legend",null,(0,l.t)(r.name)),r.themes.map(function(r){var i=n>=t.state.maxChecked&&!a[r.id];return React.createElement("label",{key:r.id,className:"checkbox"},React.createElement("input",{type:"checkbox",disabled:i,checkedLink:e.linkParentState(r.id)}),(0,l.t)(r.name))}))}),";")}}]),t}(React.Component);t["default"]=s,Object.assign(s.prototype,c.linkedParentState),s.defaultProps={themeCategories:[{name:"Community",themes:[{id:"theme-civic-activist",name:"Activism"},{id:"theme-civic-truecitizen",name:"Citizenry"},{id:"theme-civic-goodneighbour",name:"Community"},{id:"theme-culture-writer",name:"Storytelling"}]},{name:"City-building",themes:[{id:"theme-urban-architecturalenthusiast",name:"Architecture"},{id:"theme-culture-aesthete",name:"Design"},{id:"theme-urban-suburbanexplorer",name:"Suburbs"},{id:"theme-urban-moversandshakers",name:"Transportation"}]},{name:"Society",themes:[{id:"theme-civic-gender",name:"Gender"},{id:"theme-civic-health",name:"Health"},{id:"theme-culture-historybuff",name:"Heritage"},{id:"theme-civic-nativeissues",name:"Native Issues"},{id:"theme-civic-religion",name:"Religion"}]},{name:"Expression",themes:[{id:"theme-culture-artist",name:"Art"},{id:"theme-urban-film",name:"Film"},{id:"theme-culture-bookworm",name:"Literature"},{id:"theme-urban-music",name:"Music"},{id:"theme-urban-play",name:"Play"}]},{name:"The Natural World",themes:[{id:"theme-nature-petlover",name:"Animals"},{id:"theme-nature-greenthumb",name:"Gardening"},{id:"theme-nature-naturelover",name:"Nature"},{id:"theme-urban-water",name:"Water"}]},{name:"Modernity",themes:[{id:"theme-civic-international",name:"International Issues"},{id:"theme-civic-military",name:"Military"},{id:"theme-civic-commerce",name:"Commerce"},{id:"theme-culture-nightowl",name:"Night Life"},{id:"theme-culture-techie",name:"Technology"},{id:"theme-urban-sports",name:"Sports"},{id:"theme-culture-foodie",name:"Food"}]}]}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.linkedParentState={linkParentState:function(e){var t=this.props.valueLink,a=t.value;return{value:a[e],requestChange:function(n){a[e]=n,t.requestChange(a)}}}}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(40),s=n(c),u=a(41),m=n(u),f=a(42),d=n(f),p=a(43),h=n(p),y=a(44),v=n(y),b=a(45),g=n(b),E=a(20),R={url:CCM_THEME_PATH+"/images/marker.png",size:new google.maps.Size(30,46),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(11,44)},k=function(e){function t(e){r(this,t);var a=i(this,Object.getPrototypeOf(t).call(this,e));return Object.assign(a,{state:{mode:{},map:null,markers:new google.maps.MVCArray,route:null,infowindow:new google.maps.InfoWindow,filters:[]},refreshGMap:function(){var e=a.props.valueLink,t=new google.maps.MVCArray,n=null;if(a.state.route&&a.state.route.setMap(null),a.state.markers.forEach(function(e){return e.setMap(null)}),e.value){var r=!0,i=!1,o=void 0;try{for(var l,c=e.value.markers[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value,u=void 0;u=s.lat&&s.lng?new google.maps.LatLng(s.lat,s.lng):a.state.map.center,t.push(a.buildMarker({latlng:u,title:s.title,description:s.description,media:s.media}))}}catch(m){i=!0,o=m}finally{try{!r&&c["return"]&&c["return"]()}finally{if(i)throw o}}n=a.buildRoute(e.value.route)}else n=a.buildRoute([]);google.maps.event.addListener(a.state.map,"click",function(e){a.state.infowindow.setMap(null),a.state.mode.addRoute&&(n.setPath(n.getPath().push(e.latLng)),a.setState({route:n}))}),a.setState({markers:t,route:n})},boundMapByWalk:function(){var e=a.state,t=e.map,n=e.markers,r=new google.maps.LatLngBounds;if(google.maps.event.trigger(t,"resize"),a.state.markers.getLength()){for(var i=0,o=n.getLength();o>i;i++)r.extend(n.getAt(i).getPosition());t.fitBounds(r)}},buildRoute:function(e){var t=new google.maps.Polyline({strokeColor:"#F16725",strokeOpacity:.8,strokeWeight:3,editable:!0,map:a.state.map});return google.maps.event.addListener(t,"rightclick",function(e){void 0!==e.vertex&&t.setPath(t.getPath().removeAt(e.vertex))}),google.maps.event.addListener(t,"mousedown",function(){return a.state.infowindow.setMap(null)}),e.length>0&&t.setPath(e.map(function(e){return new google.maps.LatLng(e.lat,e.lng)})),t},deleteMarker:function(e){var t=a.state.markers;e.setMap(null),t.removeAt(t.indexOf(e)),a.setState({markers:t})},moveBefore:function(e,t){var n=a.state.markers,r=n.getAt(e);n.removeAt(e),n.insertAt(t,r),a.setState({markers:n},a.syncState)},toggleAddPoint:function(){var e=a.state.markers,t=a.buildMarker();e.push(t),a.setState({markers:e,mode:{}},function(){a.syncState(),a.showInfoWindow(t)}),a.state.infowindow.setMap(null)},toggleAddRoute:function(){a.setState({mode:{addRoute:!a.state.mode.addRoute}},function(){return a.state.infowindow.setMap(null)})},clearRoute:function(){a.state.infowindow.setMap(null),a.state.route.setPath([]),a.setState({mode:{}})},getStateSimple:function(){var e=a.state.markers.getArray().map(function(e){var t=JSON.parse(e.title);return{lat:e.position.lat(),lng:e.position.lng(),title:t.title,description:t.description,media:t.media,style:"stop"}}),t=[];return a.state.route&&(t=a.state.route.getPath().getArray().map(function(e){return{lat:e.lat(),lng:e.lng()}})),{markers:e,route:t}},syncState:function(){return a.props.valueLink.requestChange(a.getStateSimple())},handleRemoveFilter:function(e){var t=a.state.filters.slice();t.splice(e,1),a.setState({filters:t})},handleChangeFilter:function(e,t){var n=a.state.filters.slice();n[e].value=t,a.setState({filters:n})},handleAddFilter:function(e){var t=a.state.filters.slice();t.push(e),a.setState({filters:t})}}),a}return o(t,e),l(t,[{key:"componentDidMount",value:function(){var e=new google.maps.Map(React.findDOMNode(this.refs.gmap),{center:new google.maps.LatLng(this.props.city.latlng[0],this.props.city.latlng[1]),zoom:this.props.initialZoom,scrollwheel:!1,rotateControl:!0,mapTypeControlOptions:{mapTypeIds:[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.SATELLITE]}});$('a[href="#route"]').on("shown.bs.tab",this.boundMapByWalk),this.setState({map:e},this.refreshGMap)}},{key:"buildMarker",value:function(e){var t=this,a=this.state.map,n={animation:google.maps.Animation.DROP,draggable:!0,style:"stop",map:a,icon:R},r=void 0,i=Object.assign({},{latlng:null,title:"",description:"",media:null},e);return i.latlng instanceof google.maps.LatLng?n.position=i.latlng:n.position=this.state.map.center,n.title=JSON.stringify({title:i.title,description:i.description,media:i.media}),r=new google.maps.Marker(n),google.maps.event.addListener(r,"click",function(){return t.showInfoWindow(r)}),google.maps.event.addListener(r,"drag",function(){}),r}},{key:"showInfoWindow",value:function(e){var t=this,a=document.createElement("div"),n=function(){return t.deleteMarker(e)};React.render(React.createElement(m["default"],{marker:e,deleteMarker:n,refresh:this.syncState}),a),this.state.map.panTo(e.getPosition()),this.state.infowindow.setContent(a),this.state.infowindow.open(this.state.map,e)}},{key:"render",value:function(){var e=void 0,t={valueLink:this.props.valueLink,refreshGMap:this.refreshGMap,boundMapByWalk:this.boundMapByWalk,addFilter:this.handleAddFilter,city:this.props.city};return this.state.markers&&this.state.markers.length&&(e=[React.createElement("h3",{key:"stops"},(0,E.t)("Walk Stops")),React.createElement(s["default"],{ref:"walkStopTable",key:1,markers:this.state.markers,deleteMarker:this.deleteMarker,moveBefore:this.moveBefore,showInfoWindow:this.showInfoWindow})]),React.createElement("div",{className:"tab-pane",id:"route",ref:"route"},React.createElement("div",{className:"page-header","data-section":"route"},React.createElement("h1",null,(0,E.t)("Share Your Route"))),React.createElement("div",{className:"alert alert-info"},(0,E.t)("Make sure to add a description to your meeting place, and the last stop. This is how people will find you on the day of your walk.")),React.createElement("div",{id:"map-control-bar"},React.createElement("button",{ref:"addPoint",className:this.state.mode.addPoint?"active":"",onClick:this.toggleAddPoint},React.createElement("i",{className:"fa fa-map-marker"}),(0,E.t)("Add Stop")),React.createElement("button",{ref:"addRoute",className:this.state.mode.addRoute?"active":"",onClick:this.toggleAddRoute},React.createElement("i",{className:"fa fa-arrows"}),(0,E.t)("Add Route")),React.createElement("button",{ref:"clearroute",onClick:this.clearRoute},React.createElement("i",{className:"fa fa-eraser"}),(0,E.t)("Clear Route")),React.createElement(v["default"],t),React.createElement(d["default"],t),React.createElement(h["default"],t)),React.createElement(g["default"],{filters:this.state.filters,changeFilter:this.handleChangeFilter,remove:this.handleRemoveFilter}),React.createElement("div",{className:"map-notifications"}),React.createElement("div",{id:"map-canvas",ref:"gmap"}),e,React.createElement("hr",null))}}]),t}(React.Component);t["default"]=k,Object.assign(k,{defaultProps:{initialZoom:15}})},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=a(20),i=function(e){return React.createElement("a",n({className:"move-marker-up"},e),React.createElement("i",{className:"fa fa-arrow-up"}))},o=function(e){return React.createElement("a",n({className:"move-marker-down"},e),React.createElement("i",{className:"fa fa-arrow-down"}))},l=function(e){return React.createElement("a",n({className:"delete-stop"},e),React.createElement("i",{className:"fa fa-times-circle-o"}))},c=function(e){var t=JSON.parse(e.marker.title),a=e.index,n=function(){return e.showInfoWindow(e.marker)},c=void 0,s=void 0,u=void 0,m=void 0;return a>0?u=React.createElement(i,{onClick:function(){return e.moveBefore(a,a-1)}}):c=(0,r.t)("Meeting Place")+": ",a<e.length-1&&(m=React.createElement(o,{onClick:function(){return e.moveBefore(a,a+1)}})),t.media&&"instagram"===t.media.type&&(s=React.createElement("img",{src:t.media.url+"media?size=t"})),React.createElement("tr",null,React.createElement("td",{onClick:n},c,s,t.title),React.createElement("td",{onClick:n},t.description),React.createElement("td",null,m,u),React.createElement("td",null,React.createElement(l,{onClick:function(){return e.deleteMarker(marker)}})))},s=function(e){var t=e.markers.getArray();return React.createElement("table",{className:"table-hover routeStops"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,(0,r.t)("Title")),React.createElement("th",null,(0,r.t)("Description")),React.createElement("th",{className:"controls"},React.createElement("i",{className:"fa fa-arrows"})),React.createElement("th",null,React.createElement("i",{className:"fa fa-trash-o"})))),React.createElement("tbody",null,t.map(function(a,r){return React.createElement(c,n({marker:a,key:"marker"+r,index:r,length:t.length},e))})))};t["default"]=s},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function(e){function t(e){a(this,t);var r=n(this,Object.getPrototypeOf(t).call(this,e));return Object.assign(r,{state:{marker:e.marker},handleTitleChange:function(e){r.setMarkerContent({title:e.target.value})},handleDescriptionChange:function(e){r.setMarkerContent({description:e.target.value})}}),r}return r(t,e),i(t,[{key:"setMarkerContent",value:function(e){var t=this.state.marker;t.setTitle(JSON.stringify(Object.assign({},JSON.parse(t.getTitle()),e))),this.setState({marker:t},this.props.refresh)}},{key:"render",value:function(){var e=this.state.marker;if(e){var t=JSON.parse(e.getTitle()),a=void 0;return t.media&&("instagram"===t.media.type?a=React.createElement("img",{className:"media",src:t.media.url+"media?size=t"}):"soundcloud"===t.media.type&&(a=React.createElement("iframe",{className:"media",width:"150",height:"100%",scrolling:"no",frameBorder:"no",src:"https://w.soundcloud.com/player/?url="+t.media.url+"&auto_play=false&hide_related=false&show_comments=true&show_user=true&show_reposts=false&visual=true"}))),React.createElement("div",{className:"stop-form"},a,React.createElement("section",{className:"details"},React.createElement("input",{type:"text",onChange:this.handleTitleChange,value:t.title,placeholder:"Title of this stop",className:"marker-title"}),React.createElement("textarea",{className:"marker-description box-sizing",onChange:this.handleDescriptionChange,placeholder:"Description of this stop",value:t.description})),React.createElement("a",{onClick:this.props.deleteMarker},React.createElement("i",{className:"fa fa-trash-o"})))}return null}}]),t}(React.Component);t["default"]=o},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function(e){function t(e){a(this,t);var r=n(this,Object.getPrototypeOf(t).call(this,e));return Object.assign(r,{state:{accessToken:null},addFilter:function(){var e={type:"text",icon:"fa fa-instagram",placeholder:"Type in the tag you used on the geocoded photos for your walk",value:"",cb:r.handleLoadFeed};r.state.accessToken?r.props.addFilter(e):r.handleConnect(function(){return r.props.addFilter(e)})},handleLoadFeed:function(e){$.ajax({type:"GET",crossDomain:!0,dataType:"jsonp",url:"https://api.instagram.com/v1/users/self/media/recent?access_token="+r.state.accessToken,success:function(t){var a=(r.props.valueLink.value||{markers:[]}).markers.slice(),n=t.data.filter(function(t){var a=!0;return e&&(a=-1!==t.tags.indexOf(e)),!(!t.location||!a)}).reverse().map(function(e){var t="";return e.comments&&e.comments.data.length>0&&e.comments.data[0].from.id===e.user.id&&(t=e.comments.data[0].text),{title:e.caption?e.caption.text.replace(/\#\w+/g,"").trim():"",description:t,media:{id:e.id,url:e.link,type:"instagram"},lat:e.location.latitude,lng:e.location.longitude}});r.props.valueLink.requestChange({markers:a.concat(n),route:r.props.valueLink.value.route},function(){r.props.refreshGMap(),r.props.boundMapByWalk()})}})}}),r}return r(t,e),i(t,[{key:"handleConnect",value:function(e){var t=this,a="af1d04f3e16940f3801ee06461c9e4bb",n="http://janeswalk.org/connected";window.loadAccessToken=function(a){return t.setState({accessToken:a},e)};var r=window.open("https://instagram.com/oauth/authorize/?client_id="+a+"&redirect_uri="+n+"&response_type=token");this.setState({authWindow:r})}},{key:"render",value:function(){return React.createElement("button",{onClick:this.addFilter},React.createElement("i",{className:"fa fa-instagram"}),"Instagram")}}]),t}(React.Component);t["default"]=o},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function(e){function t(){a(this,t);var e=n(this,Object.getPrototypeOf(t).call(this));return e.state={playlists:[]},e}return r(t,e),i(t,[{key:"handleConnect",value:function(e){var t=this,a="3a4c85d0eb4f8579fb680bb738bd0ba8",n="http://janeswalk.org/connected";window.loadAccessToken=function(a){t.setState({accessToken:a},t.handleLoadPlaylists(a,e))};var r=window.open("https://soundcloud.com/connect/?client_id="+a+"&redirect_uri="+n+"&response_type=token&state=soundcloud");this.setState({authWindow:r})}},{key:"handleLoadPlaylists",value:function(e,t){e=e||this.state.accessToken,$.ajax({type:"GET",crossDomain:!0,dataType:"jsonp",url:"https://api.soundcloud.com/me/playlists.json?oauth_token="+e,success:function(e){_this.setState({playlists:e}),t()}})}},{key:"loadPointsFromPlaylist",value:function(e){var t=this,a=(this.props.valueLink.value||{markers:[]}).markers.slice(),n=this.state.playlists[e].tracks.map(function(e){var t={title:e.title||"",description:e.description||"",media:{type:"soundcloud",id:e.id,url:e.uri}};return e.tag_list.split(" ").forEach(function(e){var a=void 0;a=e.indexOf("geo:lat="),a>-1&&(t.lat=e.substr(a+8)),a=e.indexOf("geo:lon="),a>-1&&(t.lng=e.substr(a+8))}),t});this.props.valueLink.requestChange({markers:a.concat(n),route:this.props.valueLink.value.route},function(){t.props.refreshGMap(),t.props.boundMapByWalk()})}},{key:"addFilter",value:function(){var e=this,t={type:"select",icon:"fa fa-soundcloud",options:this.state.playlists,value:0,cb:this.loadPointsFromPlaylist};this.state.accessToken?this.props.addFilter(t):this.handleConnect(function(){t.options=e.state.playlists,e.props.addFilter(t)})}},{key:"render",value:function(){var e=this;return React.createElement("button",{onClick:function(){return e.addFilter()}},React.createElement("i",{className:"fa fa-soundcloud"}),"SoundCloud")}}]),t}(React.Component);t["default"]=o},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function(e){function t(){a(this,t);var e=n(this,Object.getPrototypeOf(t).call(this));return e.state={query:"",accessToken:!0},e}return r(t,e),i(t,[{key:"componentWillMount",value:function(){var e=this;window.setAccessToken=function(t){return e.setState({accessToken:t})}}},{key:"handleLoadToken",value:function(){var e=this;$.ajax({method:"GET",url:"/api/twitter",dataType:"json",success:function(t){t.access_token&&e.setState({accessToken:t.access_token})}})}},{key:"loadFeed",value:function(e){var t=this;e=encodeURIComponent(e),$.ajax({type:"GET",url:"/api/twitter?q="+e+"&coords="+this.props.city.latlng[0]+","+this.props.city.latlng[1],success:function(e){var a=(t.props.valueLink.value||{markers:[]}).markers.slice();t.props.valueLink.requestChange({markers:a.concat(e.map(function(e){return{title:e.description.split(" ").slice(0,5).join(" "),description:e.description,lat:e.lat,lng:e.lng}})),route:t.props.valueLink.value.route},function(){setTimeout(function(){t.props.refreshGMap(),t.props.boundMapByWalk()},100)})}})}},{key:"handleQueryChange",value:function(e){this.setState({query:e.target.value})}},{key:"addFilter",value:function(){this.props.addFilter({type:"text",icon:"fa fa-twitter",placeholder:'Type in a standard twitter search for geocoded tweets, e.g. "#ParkStroll #janeswalk from:MyName"',value:"",cb:this.loadFeed})}},{key:"render",value:function(){var e=this;return React.createElement("button",{onClick:function(){return e.addFilter}},React.createElement("i",{className:"fa fa-twitter"}),"twitter")}}]),t}(React.Component);t["default"]=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=React.addons.CSSTransitionGroup;t["default"]=function(e){var t=e.filters,n=e.remove,r=e.changeFilter;return React.createElement("div",{className:"filterInputs"},React.createElement(a,{transitionName:"fade"},t.map(function(e,t){var a=function(a){a.preventDefault(),e.cb(e.value),n(t)},i=function(e){return r(t,e.target.value)},o=null;return"text"===e.type?o=React.createElement("input",{type:"text",placeholder:e.placeholder,value:e.text,onChange:i}):"select"===e.type&&(o=React.createElement("select",{selected:e.value,onChange:i},e.options.map(function(e,t){return React.createElement("option",{key:"option"+t,value:t},e.title)}))),React.createElement("form",{className:"filter",onSubmit:a},React.createElement("i",{className:e.icon}),React.createElement("span",{className:"input"},o),React.createElement("span",{className:"button"},React.createElement("input",{type:"submit",value:"Go"})),React.createElement("span",{className:"button"},React.createElement("input",{type:"button",value:"Cancel",onClick:function(){return n(t)}})))})))}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(47),s=n(c),u=a(48),m=n(u),f=a(49),d=n(f),p=a(51),h=n(p),y=a(20),v=36e5,b=function(e){function t(){r(this,t);var e=i(this,Object.getPrototypeOf(t).call(this)),a=new Date;return Object.assign(e,{state:{start:new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()+7,11,0)),duration:v},setDay:function(t){var a=e.state.start;a.setUTCFullYear(t.getUTCFullYear()),a.setUTCMonth(t.getUTCMonth()),a.setUTCDate(t.getUTCDate()),e.setState({start:a})},setTime:function(t){var a=e.state.start;a.setUTCHours(t.getUTCHours()),a.setUTCMinutes(t.getUTCMinutes()),e.setState({start:a})},linkTime:function(){return{value:e.state.start.getTime(),requestChange:function(t){return e.setState({start:new Date(Number(t))})}}},addDate:function(){var t=e.props.valueLink,a=t.value||{},n=(a.slots||[]).slice(),r=e.state.start.getTime(),i=r+e.state.duration;n.push([r/1e3,i/1e3]),a.slots=n,t.requestChange(a)}}),e}return o(t,e),l(t,[{key:"render",value:function(){var e=this.props.valueLink;return React.createElement("div",{className:"tab-pane",id:"time-and-date"},React.createElement("div",{className:"tab-content",id:"walkduration"},React.createElement("div",{className:"tab-pane hide",id:"time-and-date-select"},React.createElement("div",{className:"page-header","data-section":"time-and-date"},React.createElement("h1",null,(0,y.t)("Set the Time and Date"))),React.createElement("legend",null,(0,y.t)("Pick one of the following:")),React.createElement("div",{className:"row"},React.createElement("ul",{className:"thumbnails",id:"block-select"},React.createElement("li",null,React.createElement("a",{href:"#time-and-date-all","data-toggle":"tab"},React.createElement("div",{className:"thumbnail"},React.createElement("img",{src:CCM_THEME_PATH+"/img/time-and-date-full.png"}),React.createElement("div",{className:"caption"},React.createElement("div",{className:"text-center"},React.createElement("h4",null,(0,y.t)("By Request"))),React.createElement("p",null,(0,y.t)("Highlight times that you're available to lead the walk, or leave your availability open. People will be asked to contact you to set up a walk.")))))),React.createElement("li",null,React.createElement("a",{href:"#time-and-date-set","data-toggle":"tab"},React.createElement("div",{className:"thumbnail"},React.createElement("img",{src:CCM_THEME_PATH+"/img/time-and-date-some.png"}),React.createElement("div",{className:"caption"},React.createElement("div",{className:"text-center"},React.createElement("h4",null,(0,y.t)("Pick Your Date"))),React.createElement("p",null,(0,y.t)("Set specific dates and times that this walk is happening."))))))))),React.createElement("div",{className:"tab-pane active",id:"time-and-date-set"},React.createElement("div",{className:"page-header","data-section":"time-and-date"},React.createElement("h1",null,(0,y.t)("Time and Date")),React.createElement("p",{className:"lead"},(0,y.t)("Select the date and time your walk is happening."))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement(s["default"],{setDay:this.setDay,defaultDate:this.state.start})),React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"thumbnail"},React.createElement("div",{className:"caption"},React.createElement("h4",{className:"date-indicate-set"},React.createElement("small",null,(0,y.t)("Date selected"),":"),this.state.start.toLocaleDateString(void 0,{weekday:"long",month:"long",day:"numeric",timeZone:"UTC"})),React.createElement("hr",null),React.createElement(m["default"],{ref:"timePicker",valueLinkDuration:this.linkState("duration"),valueLinkStart:this.linkTime()}),React.createElement("hr",null),React.createElement("button",{className:"btn btn-primary",id:"save-date-set",onClick:this.addDate},(0,y.t)("Add Date")))))),React.createElement("br",null),React.createElement(d["default"],{valueLink:e}),React.createElement("hr",null)),React.createElement("div",{className:"tab-pane hide",id:"time-and-date-all"},React.createElement("div",{className:"page-header","data-section":"time-and-date"},React.createElement("h1",null,(0,y.t)("Time and Date")),React.createElement("p",{className:"lead"},(0,y.t)("Your availability will be visible to people on your walk page and they’ll be able to send you a walk request."))),React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",name:"open"}),(0,y.t)("Leave my availability open. Allow people to contact you to set up a walk.")),React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"date-picker"})),React.createElement("div",{className:"col-md-6"},React.createElement("div",{className:"thumbnail"},React.createElement("div",{className:"caption"},React.createElement("div",{className:"date-select-group"},React.createElement("small",null,(0,y.t)("Date selected"),":"),React.createElement("h4",{className:"date-indicate-all"}),React.createElement("hr",null)),React.createElement("label",{htmlFor:"walk-duration"},(0,y.t)("Approximate Duration of Walk"),":"),React.createElement("select",{name:"duration",id:"walk-duration",defaultValue:"1 Hour, 30 Minutes"},React.createElement("option",{value:"30 Minutes"},"30 Minutes"),React.createElement("option",{value:"1 Hour"},"1 Hour"),React.createElement("option",{value:"1 Hour, 30 Minutes"},"1 Hour, 30 Minutes"),React.createElement("option",{value:"2 Hours"},"2 Hours"),React.createElement("option",{value:"2 Hours, 30 Minutes"},"2 Hours, 30 Minutes"),React.createElement("option",{value:"3 Hours"},"3 Hours"),React.createElement("option",{value:"3 Hours, 30 Minutes"},"3 Hours, 30 Minutes")),React.createElement("div",{className:"date-select-group"},React.createElement("hr",null),React.createElement("button",{className:"btn btn-primary",id:"save-date-all",onClick:this.addDate},(0,y.t)("Add Date"))))))),React.createElement("br",null),React.createElement(h["default"],null),React.createElement("hr",null))))}}]),t}(React.Component);t["default"]=b,Object.assign(b.prototype,React.addons.LinkedStateMixin)},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e){function t(){return a(this,t),n(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.setDay,a=e.defaultDate;$(React.findDOMNode(this)).datepicker({defaultDate:a,onSelect:function(e){var a=e.split("/"),n=i(a,3),r=n[0],o=n[1],l=n[2];t(new Date(Date.UTC(l,r-1,o)))}})}},{key:"render",value:function(){return React.createElement("div",{className:"date-picker"})}}]),t}(React.Component);t["default"]=l},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){for(var t=arguments.length<=1||void 0===arguments[1]?18e5:arguments[1],a=new Intl.DateTimeFormat(void 0,{hour:"numeric",minute:"2-digit",timeZone:"UTC"}),n=[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()],r=Date.UTC.apply(this,n),i=Date.UTC.apply(this,n.concat([23,30])),o=[],l=r;i>=l;l+=t)o.push({asMs:l,asString:a.format(l)});return o}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=a(20),s=function(e){function t(e){n(this,t);var a=r(this,Object.getPrototypeOf(t).call(this,e));return a.state={startTimes:o(new Date(e.valueLinkStart.value))},a}return i(t,e),l(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.valueLinkStart.value,a=this.props.valueLinkStart.value;a!==t&&this.setState({startTimes:o(new Date(t))})}},{key:"render",value:function(){var e=this.props,t=e.valueLinkDuration,a=e.valueLinkDuration.requestChange,n=e.valueLinkStart;return t.requestChange=function(e){return a(+e)},React.createElement("div",{className:"time-picker"},React.createElement("label",{htmlFor:"walk-time"},(0,c.t)("Start Time"),":"),React.createElement("select",{name:"start",id:"walk-start",valueLink:n},this.state.startTimes.map(function(e,t){return React.createElement("option",{key:"walk-start"+t,value:e.asMs},e.asString)})),React.createElement("label",{htmlFor:"walk-time"},(0,c.t)("Approximate Duration of Walk"),":"),React.createElement("select",{name:"duration",id:"walk-duration",valueLink:t},React.createElement("option",{value:18e5},"30 Minutes"),React.createElement("option",{value:36e5},"1 Hour"),React.createElement("option",{value:54e5},"1 Hour, 30 Minutes"),React.createElement("option",{value:72e5},"2 Hours"),React.createElement("option",{value:9e6},"2 Hours, 30 Minutes"),React.createElement("option",{value:108e5},"3 Hours"),React.createElement("option",{value:126e5},"3 Hours, 30 Minutes")))}}]),t}(React.Component);t["default"]=s},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(20),i=a(50),o=n(i);t["default"]=function(e){var t=e.valueLink.value.slots,a=void 0===t?[]:t,n=e.valueLink;return React.createElement("table",{className:"table table-bordered table-hover",id:"date-list-all"},React.createElement("thead",null,React.createElement("tr",null,React.createElement("th",null,(0,r.t)("Date")),React.createElement("th",null,(0,r.t)("Start Time")),React.createElement("th",null,(0,r.t)("Duration")),React.createElement("th",null))),React.createElement("tbody",null,a.map(function(e,t){return React.createElement(o["default"],{key:"timerow"+t,index:t,slot:e,valueLink:n})})))}},function(e,t,a){"use strict";function n(e,t){var a=t.value,n=t.value.slots,r=void 0===n?[]:n,i=t.requestChange;i(Object.assign({},a,{slots:r.slice().splice(e,1)}))}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=a(20),o=void 0,l=void 0;"object"===("undefined"==typeof Intl?"undefined":r(Intl))&&(o=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"}),l=new Intl.DateTimeFormat("en-US",{hour:"numeric",minute:"2-digit",timeZone:"UTC"})),t["default"]=function(e){var t=e.slot,a=e.index,r=e.valueLink,c=function(){return n(a,r)},s=new Date(1e3*t[0]),u=new Date(1e3*(t[1]-t[0])),m=u.getUTCHours(),f=u.getUTCMinutes(),d=[];return m&&d.push((0,i.t2)("%d Hour","%d Hours",m)),f&&d.push((0,i.t2)("%d Minute","%d Minutes",f)),React.createElement("tr",null,React.createElement("td",null,o.format(s)),React.createElement("td",null,l.format(s)),React.createElement("td",null,d.join(", ")),React.createElement("td",null,React.createElement("a",{onClick:c},React.createElement("i",{className:"fa fa-times-circle-o"})," ",(0,i.t)("Remove"))))}},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=function(e){function t(){return a(this,t),n(this,Object.getPrototypeOf(t).apply(this,arguments))}return r(t,e),i(t,[{key:"render",value:function(){return React.createElement("table",null)}}]),t}(React.Component);t["default"]=o},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(20),c=a(38),s=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props.wards;return e&&this.props.valueLink?React.createElement("fieldset",{id:"wards"},React.createElement("legend",null,(0,l.t)("Sub-locality")),React.createElement("div",{className:"item"},React.createElement("div",{className:"alert alert-info"},(0,l.t)("Choose a specific neighbourhood or area where your walk will take place.")),React.createElement("select",{id:"ward",name:"ward",valueLink:this.props.valueLink},React.createElement("option",{value:""},"Choose a region"),e.map(function(e,t){return React.createElement("option",{key:t,value:e.value},e.value)})))):React.createElement("fieldset",{id:"wards"})}}]),t}(React.Component);t["default"]=s,Object.assign(s.prototype,c.linkedParentState)},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(38),c=a(20),s=[{id:"accessible-familyfriendly",name:(0,c.t)("Family friendly")},{id:"accessible-wheelchair",name:(0,c.t)("Wheelchair accessible")},{id:"accessible-dogs",name:(0,c.t)("Dogs welcome")},{id:"accessible-strollers",name:(0,c.t)("Strollers welcome")},{id:"accessible-bicycles",name:(0,c.t)("Bicycles welcome")},{id:"accessible-steephills",name:(0,c.t)("Steep hills")},{id:"accessible-uneven",name:(0,c.t)("Wear sensible shoes (uneven terrain)")},{id:"accessible-busy",name:(0,c.t)("Busy sidewalks")},{id:"accessible-bicyclesonly",name:(0,c.t)("Bicycles only")},{id:"accessible-lowlight",name:(0,c.t)("Low light or nighttime")},{id:"accessible-seniors",name:(0,c.t)("Senior Friendly")}],u=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),o(t,[{key:"render",value:function(){var e=this;return React.createElement("fieldset",{id:"accessibilities"},React.createElement("legend",{className:"required-legend"},(0,c.t)("How accessible is this walk?")),React.createElement("fieldset",null,s.map(function(t){return React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:e.linkParentState(t.id)}),t.name)})))}}]),t}(React.Component);t["default"]=u,Object.assign(u.prototype,l.linkedParentState)},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=t.value,n=t.onChange;return{value:a[e],onChange:function(t){return n(e,t.target.value)}}}function c(e){var t=e.values,a=e.onChange;return t.map(function(e,n){var r=void 0;e.phone=e.phone||"";var i={key:n,id:"teammember"+n,value:e,onChange:function(r,i){var l=t.slice(),c=Object.assign({},e,o({},r,i));l[n]=c,a(l)},onDelete:function(){return u(t,n,a)}};return"you"===e.type?r=React.createElement(y,i):"leader"===e.type?r=React.createElement(v,i):"organizer"===e.type?r=React.createElement(b,i):"community"===e.type?r=React.createElement(g,i):"volunteer"===e.type&&(r=React.createElement(E,i)),r})}function s(e,t,a){var n=e.slice();n.push(t),a(n)}function u(e,t,a){var n=e.slice();n.splice(t,1),a(n)}Object.defineProperty(t,"__esModule",{value:!0});var m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},f=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=a(20),p={leader:{type:"leader","name-first":"","name-last":"",bio:"",primary:"",twitter:"",facebook:"",website:"",email:"",phone:""},organizer:{type:"organizer","name-first":"","name-last":"",institution:"",website:""},community:{
type:"community","name-first":"","name-last":"",bio:"",twitter:"",facebook:"",website:""},volunteer:{type:"volunteer","name-first":"","name-last":"",role:"",website:""}},h=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),f(t,[{key:"componentDidUpdate",value:function(e){e.team.length<this.props.team.length&&document.getElementById("teammember"+(this.props.team.length-1)).scrollIntoView()}},{key:"render",value:function(){var e=this.props,t=e.team,a=e.onChange;return React.createElement("div",{className:"tab-pane",id:"team"},React.createElement("div",{className:"page-header","data-section":"team"},React.createElement("h1",null,(0,d.t)("Build Your Team"))),c({values:t,onChange:a}),React.createElement("div",{id:"add-member"},React.createElement("h2",null,(0,d.t)("Who else is involved with this walk?")),React.createElement("h3",{className:"lead"},(0,d.t)("Click to add team members to your walk")," (",(0,d.t)("Optional"),")"),React.createElement("div",{className:"team-set"},React.createElement("div",{className:"team-row"},React.createElement("section",{className:"new-member",id:"new-walkleader",title:"Add New Walk Leader",onClick:function(){return s(t,p.leader,a)}},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},(0,d.t)("Walk Leader")),React.createElement("p",null,(0,d.t)("A person presenting information, telling stories, and fostering discussion during the Jane's Walk."))),React.createElement("section",{className:"new-member",id:"new-walkorganizer",title:"Add New Walk Organizer",onClick:function(){return s(t,p.organizer,a)}},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},(0,d.t)("Walk Organizer")),React.createElement("p",null,(0,d.t)("A person responsible for outreach to new and returning Walk Leaders and Community Voices.")))),React.createElement("div",{className:"team-row"},React.createElement("section",{className:"new-member",id:"new-communityvoice",title:"Add A Community Voice",onClick:function(){return s(t,p.community,a)}},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},(0,d.t)("Community Voice")),React.createElement("p",null,(0,d.t)("A community member with stories and/or personal experiences to share."))),React.createElement("section",{className:"new-member",id:"new-othermember",title:"Add another helper to your walk",onClick:function(){return s(t,p.volunteer,a)}},React.createElement("div",{className:"icon"}),React.createElement("h4",{className:"title text-center"},(0,d.t)("Volunteers")),React.createElement("p",null,(0,d.t)("Other people who are helping to make your walk happen.")))))))}}]),t}(React.Component);t["default"]=h;var y=function(e){return React.createElement("fieldset",{className:"team-member walk-owner"},React.createElement("span",null,React.createElement("legend",null,(0,d.t)("You"))),React.createElement("fieldset",{className:"name item required"},React.createElement("label",null,(0,d.t)("Name")),React.createElement("input",m({type:"text",placeholder:"First"},l("name-first",e))),React.createElement("input",m({type:"text",placeholder:"Last"},l("name-last",e)))),React.createElement("fieldset",{className:"role item required"},React.createElement("label",null,(0,d.t)("Role")),React.createElement("select",l("role",e),React.createElement("option",{defaultValue:"walk-leader"},(0,d.t)("Walk Leader")),React.createElement("option",{defaultValue:"co-walk-leader"},(0,d.t)("Co-Walk Leader")),React.createElement("option",{defaultValue:"walk-organizer"},(0,d.t)("Walk Organizer")))),React.createElement("fieldset",{className:"item"},React.createElement("label",{className:"checkbox"},React.createElement("input",m({type:"checkbox",className:"role-check"},l("primary",e))),(0,d.t)("Primary Walk Leader"))),React.createElement("fieldset",{className:"item required"},React.createElement("label",{htmlFor:"bio"},(0,d.t)("Introduce yourself")),React.createElement("p",{className:"alert alert-info"},(0,d.t)("We recommend keeping your bio under 60 words")),React.createElement("textarea",m({rows:"6"},l("bio",e)))),React.createElement("fieldset",{className:"contact"},React.createElement("fieldset",{className:"item"},React.createElement("label",null,React.createElement("i",{className:"fa fa-envelope"})," ",(0,d.t)("Email")),React.createElement("input",m({type:"email",placeholder:""},l("email",e)))),React.createElement("fieldset",{className:"item"},React.createElement("label",{htmlFor:"leader-twitter"},React.createElement("i",{className:"fa fa-twitter"})," Twitter"),React.createElement("div",{className:"input-group"},React.createElement("span",{className:"input-group-addon"},"@"),React.createElement("input",m({className:"col-md-12",type:"text",placeholder:"Username"},l("twitter",e)))))),React.createElement("fieldset",{className:"social"},React.createElement("fieldset",{className:"item"},React.createElement("label",{htmlFor:"facebook"},React.createElement("i",{className:"fa fa-facebook-square"})," Facebook"),React.createElement("input",m({type:"text",placeholder:""},l("facebook",e)))),React.createElement("fieldset",{className:"item"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"})," ",(0,d.t)("Website")),React.createElement("input",m({type:"text",placeholder:""},l("website",e))))),React.createElement("hr",null),React.createElement("section",{className:"private"},React.createElement("h4",null,(0,d.t)("We'll keep this part private")),React.createElement("p",{className:"alert alert-info"},(0,d.t)("We'll use this information to contact you about your walk submission. We wont share this information with 3rd parties.")),React.createElement("fieldset",{className:"tel required"},React.createElement("label",null,React.createElement("i",{className:"fa fa-phone-square"}),(0,d.t)("Phone Number")),React.createElement("input",m({type:"tel",maxLength:"18",placeholder:""},l("phone",e))))))},v=function(e){return React.createElement("fieldset",{className:"team-member walk-leader clearfix"},React.createElement("legend",null,(0,d.t)("Walk Leader")),React.createElement("div",null,React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},(0,d.t)("Name")),React.createElement("div",{className:"item"},React.createElement("form",{className:"form-inline"},React.createElement("input",m({type:"text",placeholder:"First"},l("name-first",e))),React.createElement("input",m({type:"text",placeholder:"Last"},l("name-last",e)))))),React.createElement("div",{className:"item"},React.createElement("label",{className:"checkbox"},React.createElement("input",m({type:"checkbox",className:"role-check"},l("primary",e))),(0,d.t)("Primary Walk Leader"))),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"bio"},(0,d.t)("Introduce the walk leader")),React.createElement("div",{className:"alert alert-info"},(0,d.t)("We recommend keeping the bio under 60 words")),React.createElement("textarea",m({className:"col-md-12",rows:"6"},l("bio",e)))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"prependedInput"},React.createElement("i",{className:"fa fa-twitter"})," Twitter"),React.createElement("div",{className:"input-prepend"},React.createElement("span",{className:"add-on"},"@"),React.createElement("input",m({className:"col-md-12",type:"text",placeholder:"Username"},l("twitter",e))))),React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"facebook"},React.createElement("i",{className:"fa fa-facebook-square"})," Facebook"),React.createElement("input",m({type:"text",placeholder:""},l("facebook",e))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),(0,d.t)("Website")),React.createElement("input",m({type:"text",placeholder:""},l("website",e))))),React.createElement("hr",null),React.createElement("h4",null,(0,d.t)("Private")),React.createElement("div",{className:"alert alert-info"},(0,d.t)("We'll use this information to contact you about your walk submission. We wont share this information with 3rd parties.")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6 required"},React.createElement("label",{htmlFor:"email"},React.createElement("i",{className:"fa fa-envelope"}),(0,d.t)("Email")),React.createElement("input",m({type:"email",placeholder:"Email"},l("email",e)))),React.createElement("div",{className:"col-md-6 tel"},React.createElement("label",{htmlFor:"phone"},React.createElement("i",{className:"fa fa-phone-square"}),(0,d.t)("Phone Number")),React.createElement("input",m({type:"tel",maxLength:"16",placeholder:""},l("phone",e)))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member",onClick:e.onDelete},(0,d.t)("Remove Team Member"))))},b=function(e){return React.createElement("fieldset",{className:"team-member walk-organizer"},React.createElement("legend",null,(0,d.t)("Walk Organizer")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-9"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},(0,d.t)("Name")),React.createElement("form",{className:"form-inline"},React.createElement("input",m({type:"text",placeholder:"First"},l("name-first",e))),React.createElement("input",m({type:"text",placeholder:"Last"},l("name-last",e))))),React.createElement("label",{htmlFor:"affiliation"},(0,d.t)("Affilated Institution")," (",(0,d.t)("Optional"),")"),React.createElement("input",m({type:"text",placeholder:"e.g. City of Toronto"},l("institution",e))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),(0,d.t)("Website")),React.createElement("input",m({type:"text",className:"col-md-12",placeholder:""},l("website",e))))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member",onClick:e.onDelete},(0,d.t)("Remove Team Member"))))},g=function(e){return React.createElement("fieldset",{className:"team-member community-voice"},React.createElement("legend",null,(0,d.t)("Community Voice")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-9"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},(0,d.t)("Name")),React.createElement("form",{className:"form-inline"},React.createElement("input",m({type:"text",placeholder:"First"},l("name-first",e))),React.createElement("input",m({type:"text",placeholder:"Last"},l("name-last",e))))),React.createElement("div",{className:"item"},React.createElement("label",{htmlFor:"bio"},(0,d.t)("Tell everyone about this person")),React.createElement("div",{className:"alert alert-info"},(0,d.t)("We recommend keeping the bio under 60 words")),React.createElement("textarea",m({className:"col-md-12",rows:"6"},l("bio",e)))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"prependedInput"},React.createElement("i",{className:"fa fa-twitter"})," Twitter"),React.createElement("div",{className:"input-prepend"},React.createElement("span",{className:"add-on"},"@"),React.createElement("input",m({className:"col-md-12",type:"text",placeholder:"Username"},l("twitter",e))))),React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"facebook"},React.createElement("i",{className:"fa fa-facebook-square"})," Facebook"),React.createElement("input",m({type:"text",placeholder:""},l("facebook",e))))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),(0,d.t)("Website")),React.createElement("input",m({type:"text",className:"col-md-12",placeholder:""},l("website",e))))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member",onClick:e.onDelete},(0,d.t)("Remove Team Member"))))},E=function(e){return React.createElement("div",{className:"thumbnail team-member othermember"},React.createElement("fieldset",null,React.createElement("legend",null,(0,d.t)("Volunteers")),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-9"},React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"name"},(0,d.t)("Name")),React.createElement("form",{className:"form-inline"},React.createElement("input",m({type:"text",placeholder:"First"},l("name-first",e))),React.createElement("input",m({type:"text",placeholder:"Last"},l("name-last",e))))),React.createElement("div",{className:"item required"},React.createElement("label",{htmlFor:"role"},(0,d.t)("Role")),React.createElement("input",m({type:"text"},l("role",e)))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-6"},React.createElement("label",{htmlFor:"website"},React.createElement("i",{className:"fa fa-link"}),(0,d.t)("Website")),React.createElement("input",m({type:"text",className:"col-md-12",placeholder:""},l("website",e)))))))),React.createElement("footer",null,React.createElement("button",{className:"btn remove-team-member",onClick:e.onDelete},(0,d.t)("Remove Team Member"))))}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(20),c=function(e){function t(e){n(this,t);var a=r(this,Object.getPrototypeOf(t).call(this,e));return Object.assign(a,{state:{eventbrite:!(!e.mirrors||!e.mirrors.eventbrite)},handlePublish:function(){a.props.saveWalk({publish:!0},function(){window.location=a.props.url})}}),a}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;$(React.findDOMNode(this)).modal(),$(React.findDOMNode(this)).bind("hidden.bs.modal",function(){return e.props.close()})}},{key:"render",value:function(){var e=this.props,t=e.city,a=e.close,n=void 0;return t.mirrors.indexOf("eventbrite")>-1&&(n=React.createElement("label",{className:"checkbox"},React.createElement("input",{type:"checkbox",checkedLink:this.linkState("eventbrite")}),(0,l.t)("Publish walk to EventBrite"))),React.createElement("dialog",{id:"publish-warning"},React.createElement("div",null,React.createElement("article",null,React.createElement("header",null,React.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-hidden":"true"},"×"),React.createElement("h3",null,(0,l.t)("Okay, You're Ready to Publish"))),React.createElement("div",{className:"modal-body"},React.createElement("p",null,(0,l.t)("Just one more thing! Once you hit publish your walk will be live on Jane's Walk right away. You can return at any time to make changes.")),n),React.createElement("footer",null,React.createElement("div",{className:"pull-left"},React.createElement("a",{className:"walkthrough close","data-dismiss":"modal",onClick:a}," ",(0,l.t)("Bring me back to edit"))),React.createElement("a",null,React.createElement("button",{className:"btn btn-primary walkthrough","data-step":"publish-confirmation",onClick:this.handlePublish},(0,l.t)("Publish")))))))}}]),t}(React.Component);t["default"]=c,Object.assign(c.prototype,React.addons.LinkedStateMixin)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20),r=function(e){return React.createElement("div",{className:"text-area-limit"},React.createElement("textarea",e),React.createElement("span",null,(0,n.t2)("%s character remaining","%s characters remaining",e.maxLength-e.valueLink.value.length)))};t["default"]=r},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(20),c=function(e){function t(){return n(this,t),r(this,Object.getPrototypeOf(t).apply(this,arguments))}return i(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this,t=React.findDOMNode(this);$(t).modal(),$(t).bind("hidden.bs.modal",function(){return e.props.close()})}},{key:"render",value:function(){return React.createElement("dialog",{id:"preview-modal"},React.createElement("div",null,React.createElement("article",null,React.createElement("header",null,React.createElement("button",{type:"button",className:"close","aria-hidden":"true","data-dismiss":"modal"},"×"),React.createElement("h3",null,(0,l.t)("Preview of your Walk"))),React.createElement("div",{className:"modal-body"},React.createElement("iframe",{src:this.props.url,frameBorder:"0"})))))}}]),t}(React.Component);t["default"]=c},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20);t["default"]=function(){return React.createElement("ul",{className:"nav nav-tabs"},React.createElement("li",{className:"active"},React.createElement("a",{"data-toggle":"tab",className:"description",href:"#description"},React.createElement("i",{className:"fa fa-list-ol"}),(0,n.t)("Describe Your Walk"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"route",href:"#route"},React.createElement("i",{className:"fa fa-map-marker"}),(0,n.t)("Share Your Route"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"time-and-date",href:"#time-and-date"},React.createElement("i",{className:"fa fa-calendar"}),(0,n.t)("Set the Time & Date"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"accessibility",href:"#accessibility"},React.createElement("i",{className:"fa fa-flag"}),(0,n.t)("Make it Accessible"))),React.createElement("li",null,React.createElement("a",{"data-toggle":"tab",className:"team",href:"#team"},React.createElement("i",{className:"fa fa-users"}),(0,n.t)("Build Your Team"))))}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){var t=Object.assign({},e);t.map&&!Array.isArray(t.map.markers)&&(t.map.markers=Helper.objectToArray(t.map.markers)),t.map&&!Array.isArray(t.map.route)&&(t.map.route=Helper.objectToArray(t.map.route)),t.time&&!Array.isArray(t.time.slots)&&(t.time.slots=Helper.objectToArray(t.time.slots));for(var a in t)t[a]===!1?t[a]="":null===t[a]&&delete t[a];return t}function i(e){var t=e.data,n=e.user,i=e.url,o=a(60),l=[{type:"you","name-first":n.firstName,"name-last":n.lastName,role:"walk-leader",primary:"on",bio:n.bio,twitter:n.twitter,facebook:n.facebook,website:n.website,email:n.email,phone:""}],c=f({},o,{team:l,url:i},r(t));return c}function o(e,t){var a=new XMLHttpRequest;a.open("GET",e.replace(/(\/+|)$/,"/json")),a.onload=function(){var a=void 0;try{a=JSON.parse(this.responseText),t(null,r(a))}catch(n){t("Error parsing JSON returned on walk"+e)}},a.onerror=function(){t("Failed to load walk "+e)},a.send()}function l(e){e(void 0,JanesWalk.walk,JanesWalk.walk.url)}function c(e,t,a,n){var r=new XMLHttpRequest;r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.open(a,e),r.onload=function(){var t;try{t=JSON.parse(this.responseText),n(null,t,e)}catch(a){n("Error parsing JSON on walk post"+e)}},r.send(JSON.stringify(t))}function s(e){NotifyActions.info("Saving walk","save"),c(y["default"].getUrl(),y["default"].getApi(),"POST",function(t,a){t?(NotifyActions.error("Failed to save walk"),console.log(t)):(NotifyActions.info("Walk saved"),e(),console.log(a))})}function u(e){NotifyActions.info("Publishing walk","save"),c(y["default"].getUrl(),y["default"].getApi(),"PUT",function(t,a){t?(NotifyActions.error("Failed to publish walk"),console.log(t)):(NotifyActions.info("Walk published"),e(),console.log(a))})}function m(e){var t=function(e,t,a){e?NotifyActions.error("Failed to load walk"):p["default"].receive(t)};e?o(e,t):l(t)}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.buildWalkObject=i,t.save=s,t.publish=u,t.load=m;var d=a(11),p=n(d),h=a(19),y=n(h)},function(e,t){e.exports={name:"",shortDescription:"",longDescription:"",accessibleInfo:"",accessibleTransit:"",accessibleParking:"",accessibleFind:"",map:{markers:[],route:[]},team:[{id:-1,type:"you","name-first":"","name-last":"",role:"walk-leader",primary:"on",bio:"",twitter:"",facebook:"",website:"",email:"",phone:""}],time:{type:"",slots:[]},thumbnails:[],wards:"",checkboxes:{},notifications:[],mirrors:{},url:""}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t,a){m.push({time:Date.now(),message:e,level:a})}Object.defineProperty(t,"__esModule",{value:!0});var o,l=a(4),c=a(8),s=a(17),u=n(s),m=[],f=Object.assign({},u["default"],{getLog:function(){return m},getLogFrom:function(e){return m.filter(function(t){return t.time>=e})},dispatchToken:(0,l.register2)((o={},r(o,c.ActionTypes.LOG_INFO,function(e){var t=e.message,a=e.component,n=void 0===a?"caw":a;i(t,n,"info")}),r(o,c.ActionTypes.LOG_WARN,function(e){var t=e.message,a=e.component;i(t,a||"caw","warn")}),r(o,c.ActionTypes.LOG_ERROR,function(e){var t=e.message,a=e.component;i(t,a||"caw","error")}),r(o,c.ActionTypes.LOG_EMPTY,function(){return m.splice(0)}),o),function(){return f.emitChange()})});t["default"]=f},function(e,t,a){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),m=a(16),f=r(m),d=a(13),p=n(d),h=a(63),y=r(h),v=a(64),b=r(v),g=a(65),E=r(g),R=a(66),k=(r(R),a(68)),w=r(k),_=a(69),O=r(_),N=a(70),T=r(N),C=a(71),P=r(C),j=a(72),S=r(j),L=a(74),M=r(L),W=function(e){var t=e.walk,a=e.page,n=e.city,r=f["default"].getLists(),i=u(r,1),o=i[0];return{walk:t,page:a,city:n,list:o,isFavourite:f["default"].hasInList(t),schedule:f["default"].getSchedule()}},A=function(e){function t(e){var a;i(this,t);for(var n=arguments.length,r=Array(n>1?n-1:0),l=1;n>l;l++)r[l-1]=arguments[l];var c=o(this,(a=Object.getPrototypeOf(t)).call.apply(a,[this,e].concat(r)));return c.state=W(e),c._onChange=c._onChange.bind(c),c}return l(t,e),s(t,[{key:"componentWillMount",value:function(){f["default"].addChangeListener(this._onChange)}},{key:"componentWillUnmount",value:function(){f["default"].removeChangeListener(this._onChange)}},{key:"_onChange",value:function(){this.setState(W)}},{key:"render",value:function(){var e=this.state,t=e.walk,a=(e.page,e.city),n=e.list,r=e.isFavourite,i=e.schedule,o=!1,l=!1;return t&&t.map&&(o=t.map.markers.length>0,l=t.map.route.length>0),React.createElement("section",{className:"walkPage"},React.createElement(y["default"],c({walk:t,city:a,isFavourite:r,schedule:i},{onSchedule:function(e){return p.schedule(t,e)},onUnschedule:function(e){return p.unschedule(t,e)},onAdd:function(){return p.add(n,t)},onRemove:function(){return p.remove(n,t)}})),React.createElement(S["default"],this.state),React.createElement(b["default"],this.state.walk),o||l?React.createElement(M["default"],{map:this.state.walk.map}):null,o?React.createElement(E["default"],this.state.walk):null,o?React.createElement(T["default"],this.state.walk):null,React.createElement(w["default"],this.state.walk),React.createElement(O["default"],this.state.walk),React.createElement(P["default"],this.state.walk))}}]),t}(React.Component);t["default"]=A,A.propsType={page:React.PropTypes.object.isRequired,walk:React.PropTypes.object.isRequired}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){var a=t.thumbnails[0]&&t.thumbnails[0].url||e.background,n=void 0;return n=a?"url("+a+")":"#eaeaea",{backgroundImage:n,backgroundSize:"cover",backgroundPosition:"50%"}}function i(e){return e&&e.markers&&e.markers.length?e.markers[0].title:void 0}Object.defineProperty(t,"__esModule",{value:!0});var o=a(24),l=n(o),c=a(19),s=(n(c),function(e){var t=e.city,a=e.walk,n=e.isFavourite,o=e.schedule,c=e.onAdd,s=e.onRemove,u=e.onSchedule,m=e.onUnschedule,f=a.title,d=a.map,p=a.time,h=a.team,y=(a.thumbnails,t.url),v=t.name,b=h.find(function(e){return"walk-leader"===e.role}),g=i(d),E=void 0;return E=n?React.createElement("button",{className:"removeFavourite",onClick:s}):React.createElement("button",{className:"addFavourite",onClick:c}),React.createElement("section",{className:"walkHeader"},React.createElement("section",{className:"coverImage",style:r(t,a)},React.createElement("ul",{className:"breadcrumb"},React.createElement("li",null,React.createElement("a",{href:"/"},React.createElement("i",{className:"fa fa-home"}))),React.createElement("li",null,React.createElement("a",{href:y},v+" walks")),React.createElement("li",{className:"active"},f))),React.createElement("h1",null,f," ",E),g?React.createElement("h4",null,g):null,React.createElement("h4",null,b?"Led By "+b["name-first"]+" "+b["name-last"]+" - ":null),React.createElement(l["default"],{time:p,walk:a,schedule:o,onSchedule:u,onUnschedule:m}))});s.propTypes={walk:React.PropTypes.object.isRequired,remove:React.PropTypes.func.isRequired,add:React.PropTypes.func.isRequired},s.defaultProps={remove:null,add:null},t["default"]=s},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.longDescription;return React.createElement("section",{className:"walkDescription"},React.createElement("a",{name:"About This Walk"}),React.createElement("h2",null,React.createElement("span",{clasName:"topRule"},"About This Walk")),React.createElement("article",{dangerouslySetInnerHTML:{__html:t}}))};a.propTypes={longDescription:React.PropTypes.string.isRequired},t["default"]=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.map;return React.createElement("section",{className:"walkRoute"},React.createElement("a",{name:"Walk Route"}),React.createElement("h2",null,"Walk Route"),React.createElement("ol",null,t.markers.map(function(e,t){return React.createElement("li",{key:t},React.createElement("h2",null,e.title),React.createElement("p",null,e.description))})))};a.propTypes={map:React.PropTypes.object.isRequired},t["default"]=a},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(67),r=function(e){var t=e.checkboxes,a=Object.keys(t).filter(function(e){return e.includes("accessible-")});return React.createElement("section",{className:"walkAccessibility"},React.createElement("h2",null,"Accessibility"),React.createElement("ul",null,a.map(function(e,t){return React.createElement("li",{key:t},(0,n.getAccessibleName)(e))})))};r.propTypes={checkboxes:React.PropTypes.array.isRequired},t["default"]=r},function(e,t){"use strict";function a(e){return(n[e.slice(11)]||{name:""}).name}Object.defineProperty(t,"__esModule",{value:!0}),t.getAccessibleName=a;var n=t.icons={familyfriendly:{name:"Family friendly",icon:""},wheelchair:{name:"Wheelchair accessible",icon:""},dogs:{name:"Dogs welcome",icon:""},strollers:{name:"Strollers welcome",icon:""},bicycles:{name:"Bicycles welcome",icon:""},steephills:{name:"Steep hills",icon:""},uneven:{name:"Uneven terrain",icon:""},busy:{name:"Busy sidewalks",icon:""},bicyclesonly:{name:"Bicycles only",icon:""},lowlight:{name:"Low light or nighttime",icon:""},seniors:{name:"Senior Friendly",icon:""}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.accessibleTransit;return t&&t.length>0?React.createElement("section",{className:"walkPublicTransit"},React.createElement("a",{name:"Taking Public Transit"}),React.createElement("h2",null,"Taking Public Transit"),t):React.createElement("section",null)};a.propTypes={accessibleTransit:React.PropTypes.string.isRequired},t["default"]=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.accessibleParking,a=e.style;return t&&t.length>0?React.createElement("section",{className:"walkParking "+a},"walk-page"===a?React.createElement("a",{name:"Parking Availability"}):null,React.createElement("a",{name:"Parking Availability"}),React.createElement("h2",null,"Parking Availability"),t):React.createElement("section",null)};a.propTypes={accessibleParking:React.PropTypes.string.isRequired},t["default"]=a},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.accessibleFind;return React.createElement("section",{className:"walkStart"},React.createElement("a",{name:"How to find us"}),React.createElement("h2",null,"How to Find Us"),t);
};a.propTypes={accessibleFind:React.PropTypes.string.isRequired},t["default"]=a},function(e,t){"use strict";function a(e){var t=e.member,a=n.filter(function(e){return t[e.name]});return React.createElement("div",{className:"btn-toolbar"},a.map(function(e,a){return React.createElement("a",{key:a,className:"btn",href:e.href+t[e.name],target:"_blank"},React.createElement("i",{className:e.style}))}))}Object.defineProperty(t,"__esModule",{value:!0});var n=[{name:"twitter",href:"http://twitter.com/",style:"fa fa-twitter"},{name:"facebook",href:"http://facebook.com/",style:"fa fa-facebook"},{name:"email",href:"mailto:",style:"fa fa-envelope-o"},{name:"website",href:"",style:"fa fa-globe"},{name:"phone",href:"",style:"fa fa-phone"}],r=function(e){var t=e.team,n=t.map(function(e,t){return React.createElement("article",{key:t},React.createElement("header",null,React.createElement("h3",null,(e["name-first"]+" "+e["name-last"]).trim(),", ",React.createElement("span",{className:"walkTeamMemberRole"},e.role)),React.createElement("footer",null,React.createElement(a,{member:e}))),React.createElement("summary",{dangerouslySetInnerHTML:{__html:e.bio}}))});return React.createElement("section",{className:"walkTeam"},React.createElement("a",{name:"About the Walk Team"}),React.createElement("h2",null,"About the Walk Team"),React.createElement("section",null,n))};r.propTypes={member:React.PropTypes.array.isRequired},t["default"]=r},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(25),i=a(66),o=(n(i),a(68)),l=(n(o),a(69)),c=(n(l),a(73)),s=[{display:"About This Walk",exists:!0},{display:"Walk Route",exists:!0},{display:"How to find us",exists:!0},{display:"Taking Public Transit",exists:!1},{display:"Parking Availability",exists:!1},{display:"About the Walk Team",exists:!0}],u=function(e){var t=e.walk,a=e.filters,n=t.checkboxes,i=t.title,o=t.map,l=t.time,u=t.team,m={data:{}};a&&(m=a.theme);var f=u.find(function(e){return"walk-leader"===e.role}),d=void 0,p=void 0,h=void 0;f&&(d=React.createElement("h6",null,"Led By ",f["name-first"]," ",f["name-last"]," ")),l.slots.length&&(p=React.createElement("h6",null,(0,r.dateFormatted)(l.slots[0][0]))),o.markers.length&&(h=React.createElement("h6",null,"Meeting at ",o.markers[0].title));var y=Object.keys(n).filter(function(e){return e.includes("theme")});return(t.accessibleTransit||[]).length>0&&(s[3].exists=!0),(t.accessibleParking||[]).length>0&&(s[4].exists=!0),React.createElement("section",{className:"walkMenu"},React.createElement("header",{className:"walkHeader"},React.createElement("h5",null,i),d,p,h),React.createElement("section",{className:"menu"},React.createElement("ul",null,s.filter(function(e){return e.exists}).map(function(e,t){return React.createElement("li",{key:t},React.createElement("a",{href:"#"+e.display},e.display))}))),React.createElement("section",{className:"tags"},y.map(function(e,t){return React.createElement("span",{className:"tag",key:t},"#",(0,c.getThemeName)(e))})))};u.propTypes={walk:React.PropTypes.object.isRequired},t["default"]=u},function(e,t){"use strict";function a(e){return(r[e.slice(6)]||{name:""}).name}function n(e){return"fa-"+(r[e.slice(6)]||{icon:""}).icon}Object.defineProperty(t,"__esModule",{value:!0}),t.getThemeName=a,t.getThemeIcon=n;var r=t.icons={"civic-activist":{name:"Activism",icon:"bullhorn"},"civic-commerce":{name:"Commerce",icon:"shopping-cart"},"civic-gender":{name:"Gender",icon:"unlock-alt"},"civic-goodneighbour":{name:"Community",icon:"group"},"civic-health":{name:"Health",icon:"medkit"},"civic-international":{name:"International Issues",icon:"globe"},"civic-military":{name:"Military",icon:"fighter-jet"},"civic-nativeissues":{name:"Native Issues",icon:"sun-o"},"civic-religion":{name:"Religion",icon:"bell"},"civic-truecitizen":{name:"Citizenry",icon:"flag-o"},"culture-aesthete":{name:"Design",icon:"pencil"},"culture-artist":{name:"Art",icon:"picture-o"},"culture-bookworm":{name:"Literature",icon:"book"},"culture-foodie":{name:"Food",icon:"cutlery"},"culture-historybuff":{name:"Heritage",icon:"archive"},"culture-nightowl":{name:"Night Life",icon:"glass"},"culture-techie":{name:"Technology",icon:"gears"},"culture-writer":{name:"Storytelling",icon:"edit"},"nature-greenthumb":{name:"Gardening",icon:"leaf"},"nature-naturelover":{name:"Nature",icon:"bug"},"nature-petlover":{name:"Animals",icon:"heart"},"urban-architecturalenthusiast":{name:"Architecture",icon:"building"},"urban-film":{name:"Film",icon:"video-camera"},"urban-moversandshakers":{name:"Transportation",icon:"truck"},"urban-music":{name:"Music",icon:"music"},"urban-play":{name:"Play",icon:"puzzle-piece"},"urban-sports":{name:"Sports",icon:"trophy"},"urban-suburbanexplorer":{name:"Suburbs",icon:"home"},"urban-water":{name:"Water",icon:"tint"}}},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){var a=new google.maps.LatLngBounds;google.maps.event.trigger(e,"resize"),t.forEach(function(e){return a.extend(e.getPosition())}),e.fitBounds(a);var n=google.maps.event.addListener(e,"bounds_changed",function(){e.getZoom()>17&&e.setZoom(17),google.maps.event.removeListener(n)})}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l={url:CCM_THEME_PATH+"/images/marker.png",size:new google.maps.Size(30,46),origin:new google.maps.Point(0,0),labelOrigin:new google.maps.Point(11,17),anchor:new google.maps.Point(11,44)},c=function(e){function t(e){var r;a(this,t);for(var i=arguments.length,o=Array(i>1?i-1:0),l=1;i>l;l++)o[l-1]=arguments[l];var c=n(this,(r=Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(o)));return c.state={googleMap:null},c}return r(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this.props.map,t=new google.maps.LatLng(e.markers[0].lat,e.markers[0].lng),a=[],n={center:t,scrollwheel:!1,backgroundColor:"#d7f0fa"},r=new google.maps.Map(React.findDOMNode(this),n);r.mapTypes.set("map_style",new google.maps.StyledMapType([{featureType:"poi.park",elementType:"geometry.fill",stylers:[{visibility:"on"},{saturation:37}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#eaeaea"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi.park",stylers:[{visibility:"on"},{color:"#cadfaa"}]},{featureType:"poi.school",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.school",elementType:"geometry",stylers:[{visibility:"on"},{color:"#dadada"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"simplified"},{color:"#90c2ff"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]}])),r.setMapTypeId("map_style");new google.maps.Polyline({strokeColor:"#F16725",strokeOpacity:.8,strokeWeight:3,path:e.route,map:r});e.markers.forEach(function(e,t){var n=new google.maps.LatLng(e.lat,e.lng),i=new google.maps.Marker({position:n,style:"stop",icon:l,map:r,label:{text:(t+1).toString(),fontWeight:"700",fontSize:"16px",color:"#ffffff"}});google.maps.event.addListener(i,"click",function(){r.panTo(i.getPosition())}),a.push(i)}),i(r,a),this.setState({googleMap:r})}},{key:"render",value:function(){return React.createElement("div",{className:"walkMap"})}}]),t}(React.Component);t["default"]=c,c.PropTypes={map:React.PropTypes.object.isRequired}},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){return{walks:R["default"].getWalks(),users:y["default"].getUsers(),city:b["default"].getCity()}}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(76),u=n(s),m=a(77),f=n(m),d=a(78),p=n(d),h=a(29),y=n(h),v=a(33),b=n(v),g=a(16),E=(n(g),a(19)),R=n(E),k=function(e){function t(){var e;r(this,t);for(var a=arguments.length,n=Array(a),o=0;a>o;o++)n[o]=arguments[o];var c=i(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return c.state=l(),c._onChange=c._onChange.bind(c),c}return o(t,e),c(t,[{key:"componentWillMount",value:function(){y["default"].addChangeListener(this._onChange),R["default"].addChangeListener(this._onChange),b["default"].addChangeListener(this._onChange)}},{key:"componentWillUnmount",value:function(){y["default"].removeChangeListener(this._onChange),R["default"].removeChangeListener(this._onChange),b["default"].removeChangeListener(this._onChange)}},{key:"_onChange",value:function(){this.setState(l)}},{key:"render",value:function(){var e=this.props.user,t=this.state,a=t.city,n=t.walks,r=t.users;return React.createElement("section",{className:"dashboard"},React.createElement(u["default"],{user:e}),React.createElement(f["default"],{walks:n,users:r,user:e,city:a}),React.createElement(p["default"],{city:a,walks:n,year:2015,leaders:[1,2],participants:[5,6]}))}}]),t}(React.Component);t["default"]=k},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.user;return React.createElement("header",null,React.createElement("h3",null,t.firstName.toUpperCase()," Organizer Dashboard"),React.createElement("h4",null,"Hi, ",t.firstName+"!"," "),React.createElement("section",{className:"dashboardLatestPost"},React.createElement("h4",null,"New User Dashboard!"),React.createElement("h5",null,"Feb 9th, 2016"),React.createElement("p",null,"Jane's Walk Leaders and City Organizers now have a whole new dashboard. We're making it easier and simpler to organize your city, and your walks. Look here for more updates soon.")))};a.PropTypes={user:React.PropTypes.object.isRequired},t["default"]=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(78),m=(n(u),a(79)),f=(n(m),a(80)),d=(n(f),a(81)),p=n(d),h=a(85),y=(n(h),function(e){function t(e){var a;r(this,t);for(var n=arguments.length,o=Array(n>1?n-1:0),l=1;n>l;l++)o[l-1]=arguments[l];var c=i(this,(a=Object.getPrototypeOf(t)).call.apply(a,[this,e].concat(o)));return c.state={menuItems:[[p["default"],"My Walks",!1,{show:"user"}],[p["default"],"Walks in My City",!1,{show:"city"}]]},c}return o(t,e),s(t,[{key:"toggleSection",value:function(e){var t=this.state.menuItems.slice();t[e][2]=!t[e][2],this.setState({menuItems:t})}},{key:"render",value:function(){var e=this,t=this.state.menuItems,a=this.props,n=a.walks,r=a.city,i=a.user,o=t.map(function(t,a){var o=c(t,4),s=o[0],u=o[1],m=o[2],f=o[3];return React.createElement("section",null,React.createElement("li",{key:a,className:m?"activeMenuItem":null,onClick:function(){return e.toggleSection(a)}},React.createElement("i",{className:"icon-caret-right"})," ",u),m?React.createElement(s,l({user:i,walks:n,city:r},f)):null)});return React.createElement("section",{className:"dashboardMenu"},React.createElement("ul",null,o))}}]),t}(React.Component));t["default"]=y},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=a(20),i=function(e){var t=e.city,a=e.walks,i=0,o=0,l=2015,c={},s=!0,u=!1,m=void 0;try{for(var f,d=a[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var p=n(f.value,2),h=(p[0],p[1]),y=h.team&&h.team[0];if(y){var v=y.email||y.firstName+y.lastName;c[v]=(c[v]||0)+1}h.time&&(o+=h.time.slots.length)}}catch(b){u=!0,m=b}finally{try{!s&&d["return"]&&d["return"]()}finally{if(u)throw m}}return i=Object.keys(c).length,React.createElement("section",{className:"dashboardRecap"},React.createElement("h2",null,"Recap"),React.createElement("h4",null,"In ",t.name,", ",(0,r.t2)("%d walk leader","%d walk leaders",i)+" "+(0,r.t2)("led %d walk","led %d walks",o)+" "+(0,r.t)("since its first Jane's Walk in %d,",l)+"."))};i.defaultProps={city:{name:"your city"}},t["default"]=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(20),r={cityOrganizers:[{id:2627,photo:"/files/avatars/2627.jpg?1450825591",firstName:"Kate",lastName:"Watanabe",email:"kate.watanabe@janeswalk.org",facebook:"",twitter:"",website:"",cityName:"Toronto"},{id:2627,photo:"/files/avatars/2627.jpg?1450825591",firstName:"Kate",lastName:"Watanabe",email:"kate.watanabe@janeswalk.org",facebook:"",twitter:"",website:"",cityName:"Toronto"},{id:2627,photo:"/files/avatars/2627.jpg?1450825591",firstName:"Kate",lastName:"Watanabe",email:"kate.watanabe@janeswalk.org",facebook:"",twitter:"",website:"",cityName:"Toronto"}],videoTips:["//player.vimeo.com/video/91185841","//player.vimeo.com/video/91185841","//player.vimeo.com/video/91185841"],files:[{url:"http://www.janeswalk.org/old/index.php/download_file/view/253/299/",name:"Vector Logo"},{url:"http://www.janeswalk.org/old/index.php/download_file/view/253/299/",name:"Vector Logo"},{url:"http://www.janeswalk.org/old/index.php/download_file/view/253/299/",name:"Vector Logo"}]},i=function(){var e=r.cityOrganizers,t=r.videoTips,a=r.files,i=(void 0).props.walks.slice(3);return React.createElement("section",{className:"dashboardResources"},React.createElement("section",{className:"walkOrganizers"},React.createElement("h3",null,"Connect with Fellow organizers"),"Got a question? Reach out to a fellow City Organizer for help.",React.createElement("ul",null,e.map(function(e,t){return React.createElement("li",{key:t},e.firstName+" from "+e.cityName+": "+e.email)}))),React.createElement("section",{className:"globalWalks resourceBlock"},React.createElement("h3",null,"Walks from around the world"),(0,n.t)("Don't know what kind of walk to lead? Here are some fun ones from around the world."),React.createElement("ul",null,i.map(function(e,t){return React.createElement("li",{key:t,className:"funWalksFromAroundWorld"},React.createElement("a",{href:e.url,className:"walkImage"},React.createElement("img",{src:"http://janeswalk.org/"+e.thumbnailUrl})),React.createElement("span",{className:"flag"},React.createElement("img",{src:"http://janeswalk.org/themes/janeswalk/images/countryFlags/Canada.png"})),React.createElement("div",null,React.createElement("a",{href:e.url},e.title,"}"),React.createElement("h4",null,"Toronto, ON")))}))),React.createElement("section",{className:"walkTips vimeos resourceBlock"},React.createElement("h3",null,(0,n.t)("Tips on leading a walk")),(0,n.t)("Leading your first or fifth walk? Here are some tips from the Jane's Walk crew!"),React.createElement("ul",null,t.map(function(e,t){return React.createElement("li",{key:t},React.createElement("div",{className:"embed-container"},React.createElement("iframe",{src:e,frameborder:"0",webkitallowfullscreen:!0,mozallowfullscreen:!0,allowfullscreen:!0})))}))),React.createElement("section",{className:"files"},React.createElement("h3",null,"Files"),(0,n.t)("Want help promoting Jane's Walk?"),(0,n.t)("Use these files to promote Jane's Walk in your city"),React.createElement("ul",null,a.map(function(e,t){return React.createElement("li",{key:t},React.createElement("a",{href:e.url},e.name,"}"))}))))};t["default"]=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){var e=DashboardStore.getMyBlogPosts().map(function(e,t){return React.createElement("li",{key:t},React.createElement("a",{href:e.url},React.createElement("h3",null,e.name),React.createElement("button",null,React.createElement("a",{href:""},"Promote"))))});return React.createElement("ul",{className:"dashboardMyBlogPosts"},e)};t["default"]=a},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t,a){var n=Object.assign({},e);return n[t]=Object.assign({},e[t]),delete n[t][a],n}function c(e,t,a){var n=Object.assign({},e);return n[t]=Object.assign({},e[t]),n[t][a]=!n[t][a],n}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),u=a(82),m=n(u),f=a(83),d=n(f),p=a(84),h=n(p),y={theme:{name:"Theme",data:{"civic-activist":"Activism","nature-petlover":"Animals","urban-architecturalenthusiast":"Architecture","culture-artist":"Art","civic-truecitizen":"Citizenry","civic-commerce":"Commerce","civic-goodneighbour":"Community","culture-aesthete":"Design","urban-film":"Film","culture-foodie":"Food","nature-greenthumb":"Gardening","civic-gender":"Gender","civic-health":"Health","culture-historybuff":"Heritage","civic-international":"International Issues","culture-bookworm":"Literature","civic-military":"Military","urban-music":"Music","civic-nativeissues":"Native Issues","nature-naturelover":"Nature","culture-nightowl":"Night Life","urban-play":"Play","civic-religion":"Religion","urban-sports":"Sports","culture-writer":"Storytelling","urban-suburbanexplorer":"Suburbs","culture-techie":"Technology","urban-moversandshakers":"Transportation","urban-water":"Water"}},ward:{name:"Region",data:{"Ward 1 Etobicoke North":"Ward 1 Etobicoke North","Ward 2 Etobicoke North":"Ward 2 Etobicoke North","Ward 3 Etobicoke Centre":"Ward 3 Etobicoke Centre","Ward 4 Etobicoke Centre":"Ward 4 Etobicoke Centre","Ward 5 Etobicoke-Lakeshore":"Ward 5 Etobicoke-Lakeshore","Ward 6 Etobicoke-Lakeshore":"Ward 6 Etobicoke-Lakeshore","Ward 7 York West":"Ward 7 York West","Ward 8 York West":"Ward 8 York West","Ward 9 York Centre":"Ward 9 York Centre","Ward 10 York Centre":"Ward 10 York Centre","Ward 11 York South-Weston":"Ward 11 York South-Weston","Ward 12 York South-Weston":"Ward 12 York South-Weston","Ward 13 Parkdale-High Park":"Ward 13 Parkdale-High Park","Ward 14 Parkdale-High Park":"Ward 14 Parkdale-High Park","Ward 15 Eglinton-Lawrence":"Ward 15 Eglinton-Lawrence","Ward 16 Eglinton-Lawrence":"Ward 16 Eglinton-Lawrence","Ward 17 Davenport":"Ward 17 Davenport","Ward 18 Davenport":"Ward 18 Davenport","Ward 19 Trinity-Spadina":"Ward 19 Trinity-Spadina","Ward 20 Trinity-Spadina":"Ward 20 Trinity-Spadina","Ward 21 St. Pauls":"Ward 21 St. Pauls","Ward 22 St. Pauls":"Ward 22 St. Pauls","Ward 23 Willowdale":"Ward 23 Willowdale","Ward 24 Willowdale":"Ward 24 Willowdale","Ward 25 Don Valley West":"Ward 25 Don Valley West","Ward 26 Don Valley West":"Ward 26 Don Valley West","Ward 27 Toronto Centre-Rosedale":"Ward 27 Toronto Centre-Rosedale","Ward 28 Toronto Centre-Rosedale":"Ward 28 Toronto Centre-Rosedale","Ward 29 Toronto-Danforth":"Ward 29 Toronto-Danforth","Ward 30 Toronto-Danforth":"Ward 30 Toronto-Danforth","Ward 31 Beaches-East York":"Ward 31 Beaches-East York","Ward 32 Beaches-East York":"Ward 32 Beaches-East York","Ward 33 Don Valley East":"Ward 33 Don Valley East","Ward 34 Don Valley East":"Ward 34 Don Valley East","Ward 35 Scarborough Southwest":"Ward 35 Scarborough Southwest","Ward 36 Scarborough Southwest":"Ward 36 Scarborough Southwest","Ward 37 Scarborough Centre":"Ward 37 Scarborough Centre","Ward 38 Scarborough Centre":"Ward 38 Scarborough Centre","Ward 39 Scarborough-Agincourt":"Ward 39 Scarborough-Agincourt","Ward 40 Scarborough Agincourt":"Ward 40 Scarborough Agincourt","Ward 41 Scarborough-Rouge River":"Ward 41 Scarborough-Rouge River","Ward 42 Scarborough-Rouge River":"Ward 42 Scarborough-Rouge River","Ward 43 Scarborough East":"Ward 43 Scarborough East","Ward 44 Scarborough East":"Ward 44 Scarborough East"}},accessibility:{name:"Accessibility",data:{bicyclesonly:"Bicyiccles only",bicycles:"Bicycles welcome",busy:"Busy sidewalks",dogs:"Dogs welcome",familyfriendly:"Family friendly",lowlight:"Low light or nighttime",seniors:"Senior Friendly",steephills:"Steep hills",strollers:"Strollers welcome",uneven:"Uneven terrain",wheelchair:"Wheelchair accessible"}}},v=function(e){function t(e){var a;r(this,t);for(var n=arguments.length,o=Array(n>1?n-1:0),l=1;n>l;l++)o[l-1]=arguments[l];var c=i(this,(a=Object.getPrototypeOf(t)).call.apply(a,[this,e].concat(o)));return c.state={currentView:"list",filters:{}},c}return o(t,e),s(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.currentView,n=t.filterByDate,r=t.filters,i=this.props,o=i.walks,s=i.city,u=i.user,f=i.show,p=void 0;if("list"===a){var v="city"===f?s.walks:u.walks;p=v.map(function(e){var t=o.get(e),a=t.map,n=t.id,r=t.title,i=t.time,l=t.team,c=t.url,s={title:r,id:n,key:n,team:l,url:c};return a&&a.markers.length&&(s.meeting=a.markers[0].title),i&&i.slots.length&&(s.start=i.slots[0][0]),React.createElement(h["default"],s)})}else"map"===a&&(p=React.createElement(d["default"],{walks:u.walks.map(function(e){return o.get(e)}),city:s}));var b=void 0;return b="future"===n?React.createElement("button",{className:"future"===n?"active":null,onClick:function(){return e.setState({filterByDate:"future"})}},"With Past Walks"):React.createElement("button",{className:"past"===n?"active":null,onClick:function(){return e.setState({filterByDate:"past"})}},"Without Past Walks"),React.createElement("div",{className:"walks"},React.createElement("button",{className:"walksListButton "+("list"===a?"active":null),onClick:function(){return e.setState({currentView:"list"})}},"List"),React.createElement("button",{className:"walksMapButton "+("map"===a?"active":null),onClick:function(){return e.setState({currentView:"map"})}},"Map"),b,s?React.createElement("a",{target:"_blank",href:"/profile/exportCity/"+s.id},React.createElement("button",null,"Export Spreadsheet")):null,React.createElement(m["default"],{allFilters:y,filters:r,removeFilter:function(t,a){return e.setState({filters:l(r,t,a)})},toggleFilter:function(t,a){return e.setState({filters:c(r,t,a)})}}),p)}}]),t}(React.Component);t["default"]=v},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.name,a=e.handle,n=e.toggleFilter,r=e.removeFilter,i=e.options,o=(e.allFilters,e.filters),l=void 0;return Object.keys(o).includes(a)&&(l=Object.keys(o[a]).map(function(e){return React.createElement("button",{key:a,className:o[e]?"activeFilter":"inActiveFilter"},React.createElement("span",{className:"buttonToggle",onClick:function(){return n(e)}}," ",t," "),React.createElement("span",{className:"buttonClose",onClick:function(){return r(e)}}," × "))})),React.createElement("li",null,React.createElement("label",null),React.createElement("select",{value:"Select",onChange:function(e){return n(e.target.value)}},React.createElement("option",{value:""},t),Object.keys(i).map(function(e,t){return React.createElement("option",{key:t,value:e},i[e])})),React.createElement("section",null,l))},n=function(e){var t=e.filters,n=e.allFilters,r=e.removeFilter,i=e.toggleFilter,o=Object.keys(t).map(function(e){return React.createElement(a,{key:e,handle:e,options:t[e].data,filters:t,allFilters:n,toggleFilter:function(t){return i(e,t)},removeFilter:function(t){return r(e,t)}})});return React.createElement("div",{className:"walksFilter"},o)};t["default"]=n},function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var a=[],n=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(a.push(o.value),!t||a.length!==t);n=!0);}catch(c){r=!0,i=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw i}}return a}return function(t,a){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=function(e){var t=e.url,a=e.title,n=e.shortDescription;return React.createElement("span",null,React.createElement("h4",null,React.createElement("a",{href:t},a)),React.createElement("p",null,n))},c=function(e,t,a){var n=new google.maps.InfoWindow({maxWidth:600}),r=document.createElement("div");return t=t.filter(function(e){var t=a.find(function(t){return t.id===e.walkId});return t?t:(e.setMap(null),!1)}),a.forEach(function(a){if(a.map&&a.map.markers&&a.map.markers.length){var i=a.map.markers[0],o=new google.maps.LatLng(i.lat,i.lng),c=t.find(function(e){return e.walkId===a.id});c||!function(){var i=new google.maps.Marker({position:o,style:"stop",map:e,walkId:a.id});t.push(i),google.maps.event.addListener(i,"click",function(){React.render(React.createElement(l,a),r),n.setMap(e),e.panTo(i.getPosition()),n.setContent(r),n.open(e,i)})}()}}),t},s=function(e){function t(e){var r;a(this,t);for(var i=arguments.length,o=Array(i>1?i-1:0),l=1;i>l;l++)o[l-1]=arguments[l];var c=n(this,(r=Object.getPrototypeOf(t)).call.apply(r,[this,e].concat(o)));return c.state={googleMap:null,googleMapMarkers:[]},c}return r(t,e),o(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=t.googleMap,n=t.googleMapMarkers,r=e.walks;this.setState({googleMapMarkers:c(a,n,r),walks:r})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.city,a=e.walks,n=i(t.latlng,2),r=n[0],o=n[1],l=this.state.googleMapMarkers,s=new google.maps.LatLng(r,o),u={center:s,zoom:12,scrollwheel:!1,backgroundColor:"#d7f0fa"},m=new google.maps.Map(ReactDOM.findDOMNode(this),u);m.mapTypes.set("map_style",new google.maps.StyledMapType([{featureType:"poi.park",elementType:"geometry.fill",stylers:[{visibility:"on"},{saturation:37}]},{featureType:"landscape",stylers:[{visibility:"on"},{color:"#eaeaea"}]},{featureType:"poi",stylers:[{visibility:"off"}]},{featureType:"poi.park",stylers:[{visibility:"on"},{color:"#cadfaa"}]},{featureType:"poi.school",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.school",elementType:"geometry",stylers:[{visibility:"on"},{color:"#dadada"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"simplified"},{color:"#90c2ff"}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"},{color:"#ffffff"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]}])),m.setMapTypeId("map_style"),this.setState({googleMap:m,googleMapMarkers:c(m,l,a)})}},{key:"render",value:function(){return React.createElement("div",{className:"walkMap",style:{width:"100%",height:"600px"}})}}]),t}(React.Component);t["default"]=s,s.PropTypes={walks:React.PropTypes.array.isRequired}},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(25),c=function(e){function t(e){n(this,t);var a=r(this,Object.getPrototypeOf(t).call(this,e));return Object.assign(a,{handleUnpublish:function(){var e=a.props.url.split(".org")[1];fetch(e,{method:"delete"}).then(function(e){return e.json()}).then(function(e){return console.log(e)})["catch"](function(e){return console.log("Error unpublishing walk: "+e.message)})}
}),a}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.start,n=e.meeting,r=e.id,i=e.team,o=e.url;return React.createElement("li",{key:r},React.createElement("div",{className:1e3*a>Date.now()?"walk":"walk pastWalk"},React.createElement("h3",null,React.createElement("a",{href:o},t||"{untitled}")),React.createElement("h4",null,(0,l.dateFormatted)(a)),i&&i.length?React.createElement("h4",null,"Led by ",i[0]["name-first"]+" "+i[0]["name-last"]," ",React.createElement("a",{href:"mailto:"+i[0].email},i[0].email)," "):null,React.createElement("h4",null,"Meeting at ",n||"{no meeting place}"),1e3*a>Date.now()?React.createElement("button",null,React.createElement("a",{href:""},"Promote")):null,React.createElement("a",{className:"option",href:"/walk/form/?load="+o.split(".org")[1]},"Edit"),React.createElement("a",{onClick:this.handleUnpublish,className:"option"},"Unpublish")))}}]),t}(React.Component);c.propTypes={title:React.PropTypes.string,time:React.PropTypes.number,meeting:React.PropTypes.string,id:React.PropTypes.string.isRequired},c.defaultProps={title:"Walk Title",time:Date.now()},t["default"]=c},function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(86),u=n(s),m=function(e){function t(e){var a;r(this,t);for(var n=arguments.length,o=Array(n>1?n-1:0),l=1;n>l;l++)o[l-1]=arguments[l];return i(this,(a=Object.getPrototypeOf(t)).call.apply(a,[this,e].concat(o)))}return o(t,e),c(t,[{key:"render",value:function(){var e=this.state,t=e.activeLeaders,a=e.filterByDate,n=e.sortBy,r=this.props.location,i=t.map(function(e,t){return React.createElement(u["default"],l({},e,{key:t}))});return React.createElement("section",{className:"dashboardWalkLeaders"},React.createElement("button",{className:"buttonAllWalks "+("all"===a?"active":null),onClick:function(){return filterLeadersByDate("all",r)}},"All Walks"),React.createElement("button",{className:"buttonUpcomingWalks "+("future"===a?"active":null),onClick:function(){return filterLeadersByDate("future",r)}},"Upcoming Walks Only"),React.createElement("button",{className:"buttonPastWalks "+("past"===a?"active":null),onClick:function(){return filterLeadersByDate("past",r)}},"Past Walks Only"),React.createElement("br",null),React.createElement("button",{className:"buttonSortAlphabetically "+("alpha"===n?"active":null),onClick:function(){return sortLeaders("alpha",r)}},"Sort Alphabetically by First Name"),React.createElement("button",{className:"buttonSortByMostWalks "+("count"===n?"active":null),onClick:function(){return sortLeaders("count",r)}},"Sort by Most Walks"),i)}}]),t}(React.Component);t["default"]=m,t["default"]=m},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){var t=e.firstName,a=e.lastName,n=e.walks,r=e.email,i=n.map(function(e,t){var a=new Date(1e3*e.time.slots[0][0]).getFullYear();return React.createElement("li",{key:t},React.createElement("a",{href:e.url},e.title)," (",a,")")});return React.createElement("li",null,React.createElement("div",{className:"walkLeader"},React.createElement("h3",null,"Walk Leader: ",t+" "+a," ",React.createElement("span",{className:"walkLeaderEmail"},React.createElement("a",{href:"mailto:"+r},r))),React.createElement("ul",null,React.createElement("h4",null,i))))};a.propTypes={firstName:React.PropTypes.string.isRequired,lastName:React.PropTypes.string.isRequired,walks:React.PropTypes.array.isRequired,email:React.PropTypes.string.isRequired},t["default"]=a},function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(20),c=function(e){var t=e.success,a=e.msg,n=e.error;return React.createElement("div",{className:"alert alert-"+(t?"info":"danger")},a,n)},s=function(e){function t(){n(this,t);var e=r(this,Object.getPrototypeOf(t).call(this));return Object.assign(e,{state:{email:"",password:"",maintainLogin:!1,message:{}},handleReset:function(){$.ajax({type:"POST",url:CCM_REL+"/login/forgot_password",data:{uEmail:e.state.email,uName:e.state.email,format:"JSON"},dataType:"json",success:function(t){return e.setState({message:t})}})},handleChangeEmail:function(t){e.setState({email:t.target.value})},handleChangePassword:function(t){e.setState({password:t.target.value})},handleChangeMaintainLogin:function(t){e.setState({maintainLogin:t.target.value})},handleSubmit:function(t){t.preventDefault(),$.ajax({type:"POST",url:CCM_REL+"/login/do_login",data:{uEmail:e.state.email,uName:e.state.email,uPassword:e.state.password,uMaintainLogin:e.state.maintainLogin,format:"JSON"},dataType:"json",success:function(t){e.setState({message:t},function(){1===t.success&&(e.props.redirectURL?window.location.replace(e.props.redirectURL):window.location.reload())})}})}}),e}return i(t,e),o(t,[{key:"render",value:function(){var e=this.props.socialLogin,t=this.state,a=t.email,n=t.password,r=void 0;return Number.isInteger(this.state.message.success)&&(r=React.createElement(c,this.state.message)),React.createElement("dialog",{id:"login"},React.createElement("div",null,React.createElement("article",null,React.createElement("header",null,React.createElement("h3",{className:"form-lead"},(0,l.t)("Sign in to %s","Jane's Walk"))),React.createElement("form",{rel:"form",method:"post",onSubmit:this.handleSubmit},React.createElement("section",{dangerouslySetInnerHTML:{__html:e}}),React.createElement("section",null,React.createElement("h4",null,(0,l.t)("or, log-in using your email & password")),React.createElement("label",{htmlFor:"uEmail"},(0,l.t)("Email"),React.createElement("input",{type:"text",name:"uEmail",id:"uEmail",ref:"uEmail",value:a,onChange:this.handleChangeEmail,className:"ccm-input-text input-large"})),React.createElement("label",{htmlFor:"uPassword"},(0,l.t)("Password"),React.createElement("input",{type:"password",name:"uPassword",id:"uPassword",value:n,onChange:this.handleChangePassword,className:"ccm-input-text input-large"})),React.createElement("label",null,React.createElement("input",{type:"checkbox",name:"uMaintainLogin",checked:this.maintainLogin,onChange:this.handleChangeMaintainLogin})," ",(0,l.t)("Keep me signed in.")),React.createElement("a",{onClick:this.handleReset},(0,l.t)("Request a new password"))),React.createElement("footer",null,r,React.createElement("a",{href:CCM_REL+"/register?uEmail="+a},(0,l.t)("Register for a new account.")),React.createElement("input",{type:"submit",className:"btn ccm-input-submit",id:"submit",value:(0,l.t)("Go!")}))))))}}]),t}(React.Component);t["default"]=s}]);